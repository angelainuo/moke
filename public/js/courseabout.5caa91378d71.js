!function(a){define("xtVideo",["jquery"],function(){return function(){!function(a){var b=function(b,c){this.defaultOptions={},this.options=a.extend({id:"",log:!0,saveStateUrl:"",position:null,startTime:null,endTime:null,volume:{value:.8},speed:{show:!0,speedValue:[2.5,2,1.5,1,.5]},caption:{},quality:{},download:{}},this.defaultOptions,c||{}),this.video=b.get(0),this.$video=b,this.$wrap=null,this.$container=null,this.$controls=null,this.$parent=b.parent(),this.asideCaptionWidth=this.options.asideCaptionWidth,this.init()};b.prototype.init=function(){this.$video=this.$video.wrap('<div class="xt_video_player_container"><div class="xt_video_player_wrap"></div></div>').addClass("xt_video_player"),this.$wrap=this.$video.parent().css({height:this.$parent.width()/16*9}),this.$video.on("loadedmetadata",function(){this.$wrap.css("height","auto")}.bind(this)),this.$container=this.$wrap.parent().css({height:"auto"}),this.$video.removeAttr("controls"),this.$controls=a('<div class="xt_video_player_controls cf"></div>').appendTo(this.$wrap),this.$wrap.on({mouseover:function(){this.$video.trigger("video.mouseover")}.bind(this),mouseout:function(){this.$video.trigger("video.mouseout")}.bind(this)}),this.$wrap.on("mousemove",function(){var a=null;return function(){this.$controls.addClass("xt_video_player_controls_show"),clearTimeout(a),a=setTimeout(function(){return this.video.paused?!1:void this.$controls.removeClass("xt_video_player_controls_show")}.bind(this),3e3)}.bind(this)}.bind(this)());for(var c in b.prototype)b.prototype.hasOwnProperty(c)&&"init"!==c&&this[c]instanceof Function&&this[c]()},b.prototype.util={fullScreenApi:function(){!function(a,b){b(window.jQuery)}(this,function(a){function b(a){return"undefined"!=typeof a}function c(b,c,d){var e=function(){};e.prototype=c.prototype,b.prototype=new e,b.prototype.constructor=b,c.prototype.constructor=c,b._super=c.prototype,d&&a.extend(b.prototype,d)}function d(a,c){var d;"string"==typeof a&&(c=a,a=document);for(var g=0;g<e.length;++g){c=c.replace(e[g][0],e[g][1]);for(var h=0;h<f.length;++h)if(d=f[h],d+=0===h?c:c.charAt(0).toUpperCase()+c.substr(1),b(a[d]))return a[d]}return void 0}var e=[["",""],["exit","cancel"],["screen","Screen"]],f=["","o","ms","moz","webkit","webkitCurrent"],g=navigator.userAgent,h=d("fullscreenEnabled"),i=g.match(/Android.*Chrome\/(\d+)\./),j=!!i;j&&(ANDROID_CHROME_VERSION=parseInt(i[1]));var k=(!j||ANDROID_CHROME_VERSION>37)&&b(d("fullscreenElement"))&&(!b(h)||h===!0),l=a.fn.jquery.split("."),m=parseInt(l[0])<2&&parseInt(l[1])<7,n=function(){this.__options=null,this._fullScreenElement=null,this.__savedStyles={}};n.prototype={"native":d,_DEFAULT_OPTIONS:{styles:{boxSizing:"border-box",MozBoxSizing:"border-box",WebkitBoxSizing:"border-box"},toggleClass:null},__documentOverflow:"",__htmlOverflow:"",_preventDocumentScroll:function(){this.__documentOverflow=document.body.style.overflow,this.__htmlOverflow=document.documentElement.style.overflow,a(this._fullScreenElement).is("body, html")||a("body, html").css("overflow","hidden")},_allowDocumentScroll:function(){document.body.style.overflow=this.__documentOverflow,document.documentElement.style.overflow=this.__htmlOverflow},_fullScreenChange:function(){this.__options&&(this.isFullScreen()?(this._preventDocumentScroll(),this._triggerEvents()):(this._allowDocumentScroll(),this._revertStyles(),this._triggerEvents(),this._fullScreenElement=null))},_fullScreenError:function(b){this.__options&&(this._revertStyles(),this._fullScreenElement=null,b&&a(document).trigger("fscreenerror",[b]))},_triggerEvents:function(){a(this._fullScreenElement).trigger(this.isFullScreen()?"fscreenopen":"fscreenclose"),a(document).trigger("fscreenchange",[this.isFullScreen(),this._fullScreenElement])},_saveAndApplyStyles:function(){var b=a(this._fullScreenElement);this.__savedStyles={};for(var c in this.__options.styles)this.__savedStyles[c]=this._fullScreenElement.style[c],this._fullScreenElement.style[c]=this.__options.styles[c];b.is("body")&&(document.documentElement.style.overflow=this.__options.styles.overflow),this.__options.toggleClass&&b.addClass(this.__options.toggleClass)},_revertStyles:function(){var b=a(this._fullScreenElement);for(var c in this.__options.styles)this._fullScreenElement.style[c]=this.__savedStyles[c];b.is("body")&&(document.documentElement.style.overflow=this.__savedStyles.overflow),this.__options.toggleClass&&b.removeClass(this.__options.toggleClass)},open:function(b,c){b!==this._fullScreenElement&&(this.isFullScreen()&&this.exit(),this._fullScreenElement=b,this.__options=a.extend(!0,{},this._DEFAULT_OPTIONS,c),this._saveAndApplyStyles())},exit:null,isFullScreen:null,isNativelySupported:function(){return k}};var o=function(){o._super.constructor.apply(this,arguments),this.exit=a.proxy(d("exitFullscreen"),document),this._DEFAULT_OPTIONS=a.extend(!0,{},this._DEFAULT_OPTIONS,{styles:{width:"100%",height:"100%"}}),a(document).bind(this._prefixedString("fullscreenchange")+" MSFullscreenChange",a.proxy(this._fullScreenChange,this)).bind(this._prefixedString("fullscreenerror")+" MSFullscreenError",a.proxy(this._fullScreenError,this))};c(o,n,{VENDOR_PREFIXES:["","o","moz","webkit"],_prefixedString:function(b){return a.map(this.VENDOR_PREFIXES,function(a){return a+b}).join(" ")},open:function(a){o._super.open.apply(this,arguments);var b=d(a,"requestFullscreen");b.call(a)},exit:a.noop,isFullScreen:function(){return null!==d("fullscreenElement")},element:function(){return d("fullscreenElement")}});var p=function(){p._super.constructor.apply(this,arguments),this._DEFAULT_OPTIONS=a.extend({},this._DEFAULT_OPTIONS,{styles:{position:"fixed",zIndex:"2147483647",left:0,top:0,bottom:0,right:0}}),this.__delegateKeydownHandler()};return c(p,n,{__isFullScreen:!1,__delegateKeydownHandler:function(){var b=a(document);b.delegate("*","keydown.fullscreen",a.proxy(this.__keydownHandler,this));var c=m?b.data("events"):a._data(document).events,d=c.keydown;m?c.live.unshift(c.live.pop()):d.splice(0,0,d.splice(d.delegateCount-1,1)[0])},__keydownHandler:function(a){return this.isFullScreen()&&27===a.which?(this.exit(),!1):!0},_revertStyles:function(){p._super._revertStyles.apply(this,arguments),this._fullScreenElement.offsetHeight},open:function(){p._super.open.apply(this,arguments),this.__isFullScreen=!0,this._fullScreenChange()},exit:function(){this.__isFullScreen&&(this.__isFullScreen=!1,this._fullScreenChange())},isFullScreen:function(){return this.__isFullScreen},element:function(){return this.__isFullScreen?this._fullScreenElement:null}}),a.fullscreen=k?new o:new p,a.fn.fullscreen=function(b){var c=this[0];return b=a.extend({toggleClass:null,overflow:"hidden"},b),b.styles={overflow:b.overflow},delete b.overflow,c&&a.fullscreen.open(c,b),this},a.fullscreen})},saveState:function(b,c){return this.options.saveStateUrl?(c=!c,a.isPlainObject(b)||(b={saved_video_position:this.video.currentTime}),b.hasOwnProperty("saved_video_position")&&(b.saved_video_position=this.util.timeFull(this.video.currentTime)),void a.ajax({url:this.options.saveStateUrl,type:"POST",dataType:"json",async:c,data:b})):(console.error("saveState request error"),!1)},timeFull:function(a){var b,c,d,e=function(a){return 10>a?"0"+a:""+a};return 0>a&&(a=0),d=Math.floor(a),c=Math.floor(d/60),b=Math.floor(c/60),d%=60,c%=60,""+e(b)+":"+e(c)+":"+e(d%60)},md5:function(){!function(a){"use strict";function b(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}function c(a,b){return a<<b|a>>>32-b}function d(a,d,e,f,g,h){return b(c(b(b(d,a),b(f,h)),g),e)}function e(a,b,c,e,f,g,h){return d(b&c|~b&e,a,b,f,g,h)}function f(a,b,c,e,f,g,h){return d(b&e|c&~e,a,b,f,g,h)}function g(a,b,c,e,f,g,h){return d(b^c^e,a,b,f,g,h)}function h(a,b,c,e,f,g,h){return d(c^(b|~e),a,b,f,g,h)}function i(a,c){a[c>>5]|=128<<c%32,a[(c+64>>>9<<4)+14]=c;var d,i,j,k,l,m=1732584193,n=-271733879,o=-1732584194,p=271733878;for(d=0;d<a.length;d+=16)i=m,j=n,k=o,l=p,m=e(m,n,o,p,a[d],7,-680876936),p=e(p,m,n,o,a[d+1],12,-389564586),o=e(o,p,m,n,a[d+2],17,606105819),n=e(n,o,p,m,a[d+3],22,-1044525330),m=e(m,n,o,p,a[d+4],7,-176418897),p=e(p,m,n,o,a[d+5],12,1200080426),o=e(o,p,m,n,a[d+6],17,-1473231341),n=e(n,o,p,m,a[d+7],22,-45705983),m=e(m,n,o,p,a[d+8],7,1770035416),p=e(p,m,n,o,a[d+9],12,-1958414417),o=e(o,p,m,n,a[d+10],17,-42063),n=e(n,o,p,m,a[d+11],22,-1990404162),m=e(m,n,o,p,a[d+12],7,1804603682),p=e(p,m,n,o,a[d+13],12,-40341101),o=e(o,p,m,n,a[d+14],17,-1502002290),n=e(n,o,p,m,a[d+15],22,1236535329),m=f(m,n,o,p,a[d+1],5,-165796510),p=f(p,m,n,o,a[d+6],9,-1069501632),o=f(o,p,m,n,a[d+11],14,643717713),n=f(n,o,p,m,a[d],20,-373897302),m=f(m,n,o,p,a[d+5],5,-701558691),p=f(p,m,n,o,a[d+10],9,38016083),o=f(o,p,m,n,a[d+15],14,-660478335),n=f(n,o,p,m,a[d+4],20,-405537848),m=f(m,n,o,p,a[d+9],5,568446438),p=f(p,m,n,o,a[d+14],9,-1019803690),o=f(o,p,m,n,a[d+3],14,-187363961),n=f(n,o,p,m,a[d+8],20,1163531501),m=f(m,n,o,p,a[d+13],5,-1444681467),p=f(p,m,n,o,a[d+2],9,-51403784),o=f(o,p,m,n,a[d+7],14,1735328473),n=f(n,o,p,m,a[d+12],20,-1926607734),m=g(m,n,o,p,a[d+5],4,-378558),p=g(p,m,n,o,a[d+8],11,-2022574463),o=g(o,p,m,n,a[d+11],16,1839030562),n=g(n,o,p,m,a[d+14],23,-35309556),m=g(m,n,o,p,a[d+1],4,-1530992060),p=g(p,m,n,o,a[d+4],11,1272893353),o=g(o,p,m,n,a[d+7],16,-155497632),n=g(n,o,p,m,a[d+10],23,-1094730640),m=g(m,n,o,p,a[d+13],4,681279174),p=g(p,m,n,o,a[d],11,-358537222),o=g(o,p,m,n,a[d+3],16,-722521979),n=g(n,o,p,m,a[d+6],23,76029189),m=g(m,n,o,p,a[d+9],4,-640364487),p=g(p,m,n,o,a[d+12],11,-421815835),o=g(o,p,m,n,a[d+15],16,530742520),n=g(n,o,p,m,a[d+2],23,-995338651),m=h(m,n,o,p,a[d],6,-198630844),p=h(p,m,n,o,a[d+7],10,1126891415),o=h(o,p,m,n,a[d+14],15,-1416354905),n=h(n,o,p,m,a[d+5],21,-57434055),m=h(m,n,o,p,a[d+12],6,1700485571),p=h(p,m,n,o,a[d+3],10,-1894986606),o=h(o,p,m,n,a[d+10],15,-1051523),n=h(n,o,p,m,a[d+1],21,-2054922799),m=h(m,n,o,p,a[d+8],6,1873313359),p=h(p,m,n,o,a[d+15],10,-30611744),o=h(o,p,m,n,a[d+6],15,-1560198380),n=h(n,o,p,m,a[d+13],21,1309151649),m=h(m,n,o,p,a[d+4],6,-145523070),p=h(p,m,n,o,a[d+11],10,-1120210379),o=h(o,p,m,n,a[d+2],15,718787259),n=h(n,o,p,m,a[d+9],21,-343485551),m=b(m,i),n=b(n,j),o=b(o,k),p=b(p,l);return[m,n,o,p]}function j(a){var b,c="";for(b=0;b<32*a.length;b+=8)c+=String.fromCharCode(a[b>>5]>>>b%32&255);return c}function k(a){var b,c=[];for(c[(a.length>>2)-1]=void 0,b=0;b<c.length;b+=1)c[b]=0;for(b=0;b<8*a.length;b+=8)c[b>>5]|=(255&a.charCodeAt(b/8))<<b%32;return c}function l(a){return j(i(k(a),8*a.length))}function m(a,b){var c,d,e=k(a),f=[],g=[];for(f[15]=g[15]=void 0,e.length>16&&(e=i(e,8*a.length)),c=0;16>c;c+=1)f[c]=909522486^e[c],g[c]=1549556828^e[c];return d=i(f.concat(k(b)),512+8*b.length),j(i(g.concat(d),640))}function n(a){var b,c,d="0123456789abcdef",e="";for(c=0;c<a.length;c+=1)b=a.charCodeAt(c),e+=d.charAt(b>>>4&15)+d.charAt(15&b);return e}function o(a){return unescape(encodeURIComponent(a))}function p(a){return l(o(a))}function q(a){return n(p(a))}function r(a,b){return m(o(a),o(b))}function s(a,b){return n(r(a,b))}function t(a,b,c){return b?c?r(b,a):s(b,a):c?p(a):q(a)}a.md5=t}(a)}},b.prototype.beforeunload=function(){a(window).on("beforeunload",function(){this.video.paused||this.util.saveState.call(this,null,!0)}.bind(this))},b.prototype.continued=function(){this.options.position&&this.$video.on("loadedmetadata",function(){this.video.duration-this.options.position>5&&(this.video.currentTime=this.options.position)}.bind(this))},b.prototype.autoplay=function(){this.$video.prop("autoplay")?this.video.play():this.$controls.addClass("xt_video_player_controls_show")},b.prototype.playBtn=function(){var b="";b=this.$video.prop("autoplay")?"xt_video_player_play_btn_pause":"";var c=a('<div class="xt_video_player_play_btn fl '+b+'"></div>').on("click",function(){this.$video.trigger("playBtn.toggle")}.bind(this)).appendTo(this.$controls);this.$video.on("click",function(){this.$video.trigger("playBtn.toggle")}.bind(this)),this.$video.on("ended",function(){c.removeClass("xt_video_player_play_btn_pause")}),this.$video.on("play",function(){c.addClass("xt_video_player_play_btn_pause")}),this.$video.on("pause",function(){this.util.saveState.call(this),c.removeClass("xt_video_player_play_btn_pause")}.bind(this)),this.$video.on("playBtn.toggle",function(){this.video.paused?this.video.play():this.video.pause()}.bind(this))},b.prototype.loader=function(){var b='<div class="spinner"> <div class="rect1"></div> <div class="rect2"></div> <div class="rect3"></div> <div class="rect4"></div> <div class="rect5"></div> </div>',c=a(b).appendTo(this.$wrap);this.$video.on("waiting",function(){c.show()}),this.$video.on("canplay playing",function(){c.hide()}),this.$video.on("loader.isShow",function(a,b){b.isShow=c.is(":visible")})},b.prototype.errorLog=function(){},b.prototype.currentTimeDisplay=function(){var b=a('<div class="xt_video_player_current_time_display fl"><span>0:00</span> / <span>0:00</span></div>').appendTo(this.$controls),c=b.find("span").eq(0),d=b.find("span").eq(1),e=function(a){return 10>a&&(a="0"+a.toString()),a};this.$video.on("durationchange",function(){var a=parseInt(this.video.duration/60),b=parseInt(this.video.duration%60);d.html(a+":"+e(b))}.bind(this)),this.$video.on("timeupdate",function(){var a=parseInt(this.video.currentTime/60),b=parseInt(this.video.currentTime%60);c.html(a+":"+e(b))}.bind(this))},b.prototype.volume=function(){this.video.volume=this.options&&this.options&&this.options.volume&&!isNaN(this.options.volume.value)?this.options.volume.value:this.options.volume.value||.8;var b=a('<div class="xt_video_player_volume fl cf"> <div class="xt_video_player_volume_icon fl"></div> <div class="xt_video_player_volume_wrap fl"> <div class="xt_video_player_volume_progress"> <div class="xt_video_player_volume_block"> </div> <div class="xt_video_player_volume_seek"></div> </div> </div> </div>').appendTo(this.$controls),c=b.find(".xt_video_player_volume_progress"),d=b.find(".xt_video_player_volume_seek").css({left:100*this.video.volume+"%"}),e=b.find(".xt_video_player_volume_block").css({width:100*this.video.volume+"%"}),f=b.find(".xt_video_player_volume_icon"),g=a(document),h=0,i=parseInt(c.width()),j=null,k=.8,l=function(a){var b=a.pageX-h;0>b&&(b=0),b>i&&(b=i),d.css({left:b}),e.css({width:b});var c=b/i;this.video.volume=c,k=c,0>=c?f.addClass("xt_video_player_volume_muted"):f.removeClass("xt_video_player_volume_muted")}.bind(this);d.on("mousedown",function(){j=!0,h=c.offset().left,g.on("mousemove",l)}),g.on("mouseup",function(){j&&(j=!1,g.off("mousemove",l))}),c.on("click",function(a){h=c.offset().left;var b=a.pageX-h;0>b&&(b=0),b>i&&(b=i),e.css({width:b}),d.css({left:b});var g=b/i;this.video.volume=g,k=g,0>=g?f.addClass("xt_video_player_volume_muted"):f.removeClass("xt_video_player_volume_muted")}.bind(this));var m=null,n=b.find(".xt_video_player_volume_wrap");f.on("click",function(b){var c=a(b.target);if(c.hasClass("xt_video_player_volume_muted")){this.video.volume=k;var f=i*k;d.css("left",f),e.css("width",f),c.removeClass("xt_video_player_volume_muted")}else this.video.volume=0,d.css("left",0),e.css("width",0),c.addClass("xt_video_player_volume_muted")}.bind(this)).on({mouseover:function(){clearTimeout(m),n.css("width",100)},mouseout:function(){m=setTimeout(function(){n.css("width",0)},100)}}),n.on("mouseover",function(){clearTimeout(m)}).on("mouseout",function(){m=setTimeout(function(){n.css("width",0)},100)})},b.prototype.fullScreen=function(){a.fullscreen||this.util.fullScreenApi();var b=a('<div class="xt_video_player_fullscreen fr"></div>').on("click",function(){this.$wrap.hasClass("xt_video_player_full_screen")?a.fullscreen.exit():this.$wrap.fullscreen()}.bind(this)).appendTo(this.$controls);a(document).on("fscreenchange",function(){a.fullscreen.isFullScreen()?(this.$wrap.add(this.$video).addClass("xt_video_player_full_screen"),b.addClass("xt_video_player_fullscreen_cancel"),this.$video.trigger("captionBtn.asideHide")):(this.$wrap.add(this.$video).removeClass("xt_video_player_full_screen"),b.removeClass("xt_video_player_fullscreen_cancel"),this.$video.trigger("captionBtn.asideShow"))}.bind(this))},b.prototype.speed=function(){if(!this.options||!this.options.speed||!this.options.speed.show)return!1;var b=1;this.options.speed.value&&(b=this.options.speed.value,this.$video.on("loadedmetadata",function(){this.playbackRate=b}));var c="";this.options.speed.speedValue.forEach(function(a){c+=a==b?'<li data-speed="'+a+'" class="xt_video_player_common_active">'+a.toFixed(2)+"x</li>":'<li data-speed="'+a+'">'+a.toFixed(2)+"x</li>"});var d=a('<div class="xt_video_player_speed xt_video_player_common fr"><div class="xt_video_player_common_value">'+b.toFixed(2)+'x</div><ul class="xt_video_player_common_list">'+c+"</ul></div>").appendTo(this.$controls).on({mouseover:function(){e.show()},mouseout:function(){e.hide()}}),e=d.find(".xt_video_player_common_list"),f=d.find(".xt_video_player_common_value"),g=b;d.find("li").on("click",function(b){var c=a(b.target);return c.hasClass("xt_video_player_common_active")?!1:(g=a(b.target).data("speed"),this.$video.trigger("speed.change",{old_speed:this.video.playbackRate,new_speed:g}),f.html(c.html()),this.video.playbackRate=g,this.util.saveState.call(this,{speed:g}),void c.addClass("xt_video_player_common_active").siblings().removeClass("xt_video_player_common_active"))}.bind(this)),this.$video.on("quality.changed",function(){this.$video.on("loadedmetadata",function(){this.video.playbackRate=g}.bind(this))}.bind(this))},b.prototype.progress=function(){var b=a('<div class="xt_video_player_progress"><div class="xt_video_player_progress_bufferTime"></div><div class="xt_video_player_progress_currentTime"></div><div class="xt_video_player_seek_handle_wrap"><div class="xt_video_player_seek_handle"><div class="xt_video_player_seek_handle_inner"></div></div></div></div>').appendTo(this.$controls),c=b.find(".xt_video_player_progress_currentTime"),d=b.find(".xt_video_player_progress_bufferTime"),e=b.find(".xt_video_player_seek_handle_wrap"),f=b.find(".xt_video_player_seek_handle"),g=0;b.on("click",function(a){g=this.$video.offset().left,f.css({left:a.pageX-g}),c.css({width:a.pageX-g});var b=(a.pageX-g)/this.$video.width(),d=this.video.duration*b;this.$video.trigger("http://www.xuetangx.com/static/xuetangx/js/xt.progress.seek",{old_time:this.video.currentTime,new_time:d,type:"onSlideSeek"}),this.video.currentTime=d,this.video.play()}.bind(this));var h=0,i=function(a){var b=0,d=a.pageX-g;d>0&&(b=d>parseInt(e.width())?parseInt(e.width()):d),f.css({left:b}),c.css({width:b})}.bind(this);f.on({mousedown:function(b){b.stopPropagation(),this.video.pause(),h=!0,g=e.offset().left,a(document).on("mousemove",i)}.bind(this),click:function(a){a.stopPropagation()}}),a(document).on({mouseup:function(b){if(b.stopPropagation(),h){a(document).off("mousemove",i);var c=(b.pageX-g)/parseInt(e.width());c>1&&(c=1);var d=c*this.video.duration;this.$video.trigger("http://www.xuetangx.com/static/xuetangx/js/xt.progress.seek",{old_time:this.video.currentTime,new_time:d,type:"onSlideSeek"}),this.video.currentTime=d,this.video.play(),h=!1}}.bind(this)}),this.$video.on("timeupdate",function(){var a=this.currentTime/this.duration*100+"%";c.css({width:a}),f.css({left:a})}),this.$video.on("progress",function(){if(this.buffered.length<1)return!1;var a=this.buffered.end(0)/this.duration*100+"%";d.css({width:a})})},b.prototype.quality=function(){if(!this.options||!this.options.quality||!this.options.quality.show||!a.isArray(this.options.quality.src)||this.options.quality.src.length<2)return!1;var b="",c="标清";this.options.quality.src.forEach(function(a){a["default"]?(b+='<li class="xt_video_player_common_active">'+a.name+"</li>",c=a.name):b+="<li>"+a.name+"</li>"});var d=a('<div class="xt_video_player_quality xt_video_player_common fr"><div class="xt_video_player_common_value">'+c+'</div><ul class="xt_video_player_common_list">'+b+"</ul></div>").appendTo(this.$controls),e=d.find(".xt_video_player_common_list"),f=d.find(".xt_video_player_common_value");e.find("li").on({click:function(b){var c=a(b.target);if(c.hasClass("xt_video_player_common_active"))return!1;f.html(c.html()),c.addClass("xt_video_player_common_active").siblings().removeClass("xt_video_player_common_active");var d=this.video.currentTime;this.$wrap.css({height:this.$video.height()}),this.$video.trigger("quality.change",{quality:c.html()}),this.$video.attr({src:this.options.quality.src[c.index()].val}),this.$video.trigger("quality.changed",{quality:c.html()});var e=function(){this.video.currentTime=d,this.video.play(),this.$video.off("loadedmetadata",e)}.bind(this);this.$video.on("loadedmetadata",e)}.bind(this)}),d.on({mouseover:function(){e.show()},mouseout:function(){e.hide()}})},b.prototype.caption=function(){if(!this.options)return!1;var b=this.options.caption;if(!b||!b.src)return!1;a.isArray(b.src)||(b.src=[b.src]);var c=function(a,b){var c,d=b.start,e=b.end,f=b.text.length-1,g=0;if(a=1e3*a,a<d[g])return-1;for(;f>g;)c=Math.ceil((f+g)/2),a<d[c]&&(f=c-1),a>=d[c]&&(g=c);return a>=e[g]?-1:g},d="",e=function(b){var c=a.Deferred();return a.ajax({url:b.src,dataType:"json",notifyOnError:!1}).done(function(a){c.resolve(a)}).fail(function(d){a.ajax({url:b.availableSrc,dataType:"json",notifyOnError:!1}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(),console.error(d,a,"caption fetch fail")})}),c.promise()};b.src.every(function(a){return a["default"]?(d=a,!1):!0}),d||(d=b.src[0]);var f=null,g=null,h=null,i=null,j=0,k=function(d){f=d;var e=a('<div class="xt_video_player_caption xt_video_player_hide"><div>').appendTo(this.$controls);b.show&&this.$video.trigger("caption.initDown"),this.$video.on({timeupdate:function(){var a=c(this.video.currentTime,f);return this.$video.trigger("caption.scrollAside",a),0>a||/^\s*$/.test(f.text[a])?(e.hide(),!1):void e.html(f.text[a]).show()}.bind(this)})}.bind(this);this.$video.on("loadedmetadata",function(){j=this.$video.height()/2}.bind(this)),this.$video.on("caption.initAside",function(){this.$wrap.width("70%"),a.fullscreen.isFullScreen()||(j=this.$video.height()/2);var b="";f.text.forEach(function(a){/^\s*$/.test(a)&&(a="..."),b+="<li>"+a+"</li>"}),g=a('<div class="xt_video_player_caption_aside" style="width: 30%;"><ul style="padding: 50% 0;">'+b+"</ul></div>").appendTo(this.$container),h=g.find("ul"),i=g.find("li").on("click",function(b){var c=a(b.target).index(),d=f.start[c]/1e3;this.$video.trigger("http://www.xuetangx.com/static/xuetangx/js/xt.progress.seek",{old_time:this.video.currentTime,new_time:d,type:"onCaptionSeek"}),this.video.currentTime=d,this.video.play()}.bind(this))}.bind(this)),this.$video.on("caption.scrollAside",function(){var a=null;return function(b,c){if(0>c||!g||!g.length)return!1;a=c;var d=i.removeClass("xt_video_player_caption_active").eq(c).addClass("xt_video_player_caption_active");g.scrollTop(d.get(0).offsetTop-j)}.bind(this)}()),this.$video.on("caption.removeAside",function(){if(g){g.remove();{this.$wrap.width()}this.$wrap.css("width","100%"),g=null}}.bind(this)),this.$video.on("caption.hasAside",function(a,b){b.hasAside=g&&g.length?!0:!1}.bind(this)),this.$video.on("caption.removeDown",function(){this.$controls.find(".xt_video_player_caption").addClass("xt_video_player_hide")}.bind(this)),this.$video.on("caption.initDown",function(){this.$controls.find(".xt_video_player_caption").removeClass("xt_video_player_hide")}.bind(this)),e(d).done(k).fail(function(){this.$video.trigger("captionBtn.removeLangBtn");var a=null;Array.isArray(b.src)&&b.src.length>1&&b.src.every(function(b){return b["default"]?!0:(a=b,!1)}),a?e(a).done(k).fail(function(){this.$video.trigger("captionBtn.remove")}.bind(this)):this.$video.trigger("captionBtn.remove")}.bind(this)),this.$video.on("caption.change",function(a,b){f=b})},b.prototype.captionBtn=function(){if(!this.options)return!1;var b=this.options.caption;if(!b||!b.src||!b.src.length)return!1;a.isArray(b.src)||(b.src=[b.src]);var c="";b.src.length>1&&b.src.forEach(function(a){c+=a["default"]?'<li data-src="'+a.src+'" data-avaliblesrc="'+a.availableSrc+'" class="xt_video_player_common_active">'+a.name+"</li>":'<li data-src="'+a.src+'" data-avaliblesrc="'+a.availableSrc+'">'+a.name+"</li>"});var d="";if(b.src.length>0&&(b.show?(d+='<li data-type="aside" class="xt_video_player_word_break">右侧<br />字幕</li>',d+='<li data-type="down" class="xt_video_player_common_active xt_video_player_word_break">下方<br />字幕</li>'):(d+='<li data-type="aside" class="xt_video_player_word_break">右侧<br />字幕</li>',d+='<li data-type="down" class="xt_video_player_word_break">下方<br />字幕</li>')),!d&&!c)return!1;var e=a('<div class="xt_video_player_caption_btn xt_video_player_common fr"><div class="xt_video_player_common_value">字幕</div><ul class="xt_video_player_common_list">'+d+c+"</ul><div>").appendTo(this.$controls).on({mouseover:function(){f.show()}.bind(this),mouseout:function(){f.hide()}.bind(this)}),f=e.find("ul");f.find("[data-type]").on("click",function(b){var c=a(b.target);"aside"===c.data("type")?c.hasClass("xt_video_player_common_active")?(this.$video.trigger("caption.removeAside"),c.removeClass("xt_video_player_common_active")):(this.$video.trigger("caption.initAside"),c.addClass("xt_video_player_common_active")):c.hasClass("xt_video_player_common_active")?(this.$video.trigger("caption.removeDown"),c.removeClass("xt_video_player_common_active")):(this.$video.trigger("caption.initDown"),c.addClass("xt_video_player_common_active"))}.bind(this));var g=function(a){this.$video.trigger("caption.change",a);var c={};this.$video.trigger("caption.hasAside",c),b.show&&c.hasAside&&(this.$video.trigger("caption.removeAside"),this.$video.trigger("caption.initAside"))}.bind(this),h=f.find("[data-src]").on("click",function(b){var c=a(b.target);if(c.hasClass("xt_video_player_common_active"))return!1;var d=function(){h.removeClass("xt_video_player_common_active"),c.addClass("xt_video_player_common_active")},e=c.html();"中文"===e?e="chinese":"英文"===e&&(e="english"),this.$video.trigger("caption.lang.change_xt",{lang:e.toLowerCase()}),a.ajax({url:c.data("src"),dataType:"json",notifyOnError:!1}).done(function(a){g(a),d()}.bind(this)).fail(function(b){a.ajax({url:c.data("avaliblesrc"),dataType:"json",notifyOnError:!1}).done(function(a){g(a),d()}.bind(this)).fail(function(a){console.error(b,a,"fetch caption fail!")})}.bind(this))}.bind(this));this.$video.on("captionBtn.remove",function(){e.length&&e.remove()}),this.$video.on("captionBtn.asideHide",function(){if(e.length){var a=e.find('[data-type="aside"]');a.length&&a.hide()}}),this.$video.on("captionBtn.asideShow",function(){if(e.length){var a=e.find('[data-type="aside"]');a.length&&a.show()}}),this.$video.on("captionBtn.removeLangBtn",function(){h.remove()})},b.prototype.startAndEnd=function(){this.options.startTime&&this.$video.on("loadedmetadata",function(){this.video.currentTime=this.options.startTime}.bind(this)),this.options.endTime&&this.$video.on("timeupdate",function(){this.video.currentTime>=parseInt(this.options.endTime)&&this.video.load()}.bind(this))},b.prototype.download=function(){if(!this.options.download.show||!this.options.download.src||!this.options.download.src.length)return!1;var b=this.options.download.src,c=a(b).insertAfter(this.$container),d=c.find(".video-tracks .a11y-menu-container"),e=c.find(".a11y-menu-button").on("click",function(a){a.preventDefault()});d.on({mouseover:function(){a(this).addClass("open")},mouseout:function(){a(this).removeClass("open")}}),d.find(".a11y-menu-item-link").on("click",function(b){var c=a(b.target),d=c.data("value");e.html("."+d),c.parent().addClass("active").siblings().removeClass("active"),this.util.saveState.call(this,{transcript_download_format:d})}.bind(this))},b.prototype.resurrect=function(){var a=null;this.$video.on("timeupdate",function(){clearTimeout(a),a=setTimeout(function(){var a={};this.$video.trigger("loader.isShow",a),this.video.paused||a.isShow||(this.video.currentTime=this.video.currentTime-.1)}.bind(this),3e3)}.bind(this))},b.prototype.CDNlog=function(){var b=a("#video_"+this.options.id);b.trigger("initialize");var c=["loadstart","progress","suspend","abort","error","emptied","stalled","play","pause","loadedmetadata","loadeddata","waiting","playing","canplay","canplaythrough","seeking","seeked","timeupdate","ended","ratechange","durationchange","volumechange"],d=this;a.each(c,function(a,c){d.video.addEventListener(c,function(){b.trigger("html5:"+c,arguments)})})},b.prototype.contextMenu=function(){this.$video.on("contextmenu",function(a){return a.preventDefault(),!1})},b.prototype.log=function(){if(!this.options.log)return!1;var b=function(b,c,d){d=!d;var e={};e.event_type=b,e.page=location.href,c||(c={}),this.options.id||console.error("video-id is empty! The log function is disabled!"),c.id=this.options.id,c.code="html5",c.currentTime=this.video.currentTime||0,this.options.cid?c.cid=this.options.cid:(a.md5||(console.info("cid param is undefined! so cid is got from url."),this.util.md5()),c.cid=a.md5(location.host+location.pathname),c.pathname=location.host+location.pathname),e.event=JSON.stringify(c),a.extend(e.event,c||{}),a.ajax({url:"/event",type:"post",async:d,data:e})}.bind(this);this.$video.on("play",function(){b("play_video")}),this.$video.on("error",function(){b("load_video_error")}),this.$video.on("waiting",function(){b("waiting_video")}),this.$video.on("pause",function(){b("pause_video")});var c=!1;this.$video.on("volumechange",function(){return c?void b("volume_change_video",{volume:this.volume}):(c=!0,!1)}),this.$video.on("loadedmetadata",function(){b("load_video")}),this.$video.on("ended",function(){b("stop_video")}),this.$video.on("speed.change",function(a,c){b("speed_change_video",c)}),this.$video.on("caption.initAside",function(){b("show_transcript")}),this.$video.on("caption.removeAside",function(){b("hide_transcript")}),this.$video.on("caption.lang.change_xt",function(a,c){b("caption_lang_change_video",c)}),this.$video.on("caption.removeDown",function(){b("hide_transcript_bottom")});var d=!1;this.$video.on("caption.initDown",function(){return d?void b("show_transcript_bottom"):(d=!0,!1)}),this.$video.on("quality.change",function(a,c){c.quality="高清"===c.quality?"HD":"ND",b("quality_change_video",c)}),this.$video.on("http://www.xuetangx.com/static/xuetangx/js/xt.progress.seek",function(a,c){b("seek_video",c)}),this.$video.on("captionBtn.asideHide",function(){b("fullscreen_video")}),this.$video.on("captionBtn.asideShow",function(){b("cancel_fullscreen_video")}),a(window).on("beforeunload",function(){b("pause_video",{},!0)})},a.fn.xtVideo=function(c){return this.each(function(){new b(a(this),c)})}}(window.jQuery)}.apply(a,arguments)})}(this),function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"http://www.xuetangx.com/static/xuetangx/js/==typeof define&&define.amd?define("moment",b):a.moment=b()}(this,function(){"use strict";function a(){return Hc.apply(null,arguments)}function b(a){Hc=a}function c(a){return"[object Array]"===Object.prototype.toString.call(a)}function d(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function e(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function f(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function g(a,b){for(var c in b)f(b,c)&&(a[c]=b[c]);return f(b,"toString")&&(a.toString=b.toString),f(b,"valueOf")&&(a.valueOf=b.valueOf),a}function h(a,b,c,d){return Ca(a,b,c,d,!0).utc()}function i(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function j(a){return null==a._pf&&(a._pf=i()),a._pf}function k(a){if(null==a._isValid){var b=j(a);a._isValid=!(isNaN(a._d.getTime())||!(b.overflow<0)||b.empty||b.invalidMonth||b.invalidWeekday||b.nullInput||b.invalidFormat||b.userInvalidated),a._strict&&(a._isValid=a._isValid&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour)}return a._isValid}function l(a){var b=h(0/0);return null!=a?g(j(b),a):j(b).userInvalidated=!0,b}function m(a,b){var c,d,e;if("undefined"!=typeof b._isAMomentObject&&(a._isAMomentObject=b._isAMomentObject),"undefined"!=typeof b._i&&(a._i=b._i),"undefined"!=typeof b._f&&(a._f=b._f),"undefined"!=typeof b._l&&(a._l=b._l),
"undefined"!=typeof b._strict&&(a._strict=b._strict),"undefined"!=typeof b._tzm&&(a._tzm=b._tzm),"undefined"!=typeof b._isUTC&&(a._isUTC=b._isUTC),"undefined"!=typeof b._offset&&(a._offset=b._offset),"undefined"!=typeof b._pf&&(a._pf=j(b)),"undefined"!=typeof b._locale&&(a._locale=b._locale),Jc.length>0)for(c in Jc)d=Jc[c],e=b[d],"undefined"!=typeof e&&(a[d]=e);return a}function n(b){m(this,b),this._d=new Date(null!=b._d?b._d.getTime():0/0),Kc===!1&&(Kc=!0,a.updateOffset(this),Kc=!1)}function o(a){return a instanceof n||null!=a&&null!=a._isAMomentObject}function p(a){return 0>a?Math.ceil(a):Math.floor(a)}function q(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=p(b)),c}function r(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&q(a[d])!==q(b[d]))&&g++;return g+f}function s(){}function t(a){return a?a.toLowerCase().replace("_","-"):a}function u(a){for(var b,c,d,e,f=0;f<a.length;){for(e=t(a[f]).split("-"),b=e.length,c=t(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=v(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&r(e,c,!0)>=b-1)break;b--}f++}return null}function v(a){var b=null;if(!Lc[a]&&"undefined"!=typeof module&&module&&module.exports)try{b=Ic._abbr,require("./locale/"+a),w(b)}catch(c){}return Lc[a]}function w(a,b){var c;return a&&(c="undefined"==typeof b?y(a):x(a,b),c&&(Ic=c)),Ic._abbr}function x(a,b){return null!==b?(b.abbr=a,Lc[a]=Lc[a]||new s,Lc[a].set(b),w(a),Lc[a]):(delete Lc[a],null)}function y(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return Ic;if(!c(a)){if(b=v(a))return b;a=[a]}return u(a)}function z(a,b){var c=a.toLowerCase();Mc[c]=Mc[c+"s"]=Mc[b]=a}function A(a){return"string"==typeof a?Mc[a]||Mc[a.toLowerCase()]:void 0}function B(a){var b,c,d={};for(c in a)f(a,c)&&(b=A(c),b&&(d[b]=a[c]));return d}function C(b,c){return function(d){return null!=d?(E(this,b,d),a.updateOffset(this,c),this):D(this,b)}}function D(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()}function E(a,b,c){return a._d["set"+(a._isUTC?"UTC":"")+b](c)}function F(a,b){var c;if("object"==typeof a)for(c in a)this.set(c,a[c]);else if(a=A(a),"function"==typeof this[a])return this[a](b);return this}function G(a,b,c){var d=""+Math.abs(a),e=b-d.length,f=a>=0;return(f?c?"+":"":"-")+Math.pow(10,Math.max(0,e)).toString().substr(1)+d}function H(a,b,c,d){var e=d;"string"==typeof d&&(e=function(){return this[d]()}),a&&(Qc[a]=e),b&&(Qc[b[0]]=function(){return G(e.apply(this,arguments),b[1],b[2])}),c&&(Qc[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function I(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function J(a){var b,c,d=a.match(Nc);for(b=0,c=d.length;c>b;b++)d[b]=Qc[d[b]]?Qc[d[b]]:I(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function K(a,b){return a.isValid()?(b=L(b,a.localeData()),Pc[b]=Pc[b]||J(b),Pc[b](a)):a.localeData().invalidDate()}function L(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Oc.lastIndex=0;d>=0&&Oc.test(a);)a=a.replace(Oc,c),Oc.lastIndex=0,d-=1;return a}function M(a){return"function"==typeof a&&"[object Function]"===Object.prototype.toString.call(a)}function N(a,b,c){dd[a]=M(b)?b:function(a){return a&&c?c:b}}function O(a,b){return f(dd,a)?dd[a](b._strict,b._locale):new RegExp(P(a))}function P(a){return a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Q(a,b){var c,d=b;for("string"==typeof a&&(a=[a]),"number"==typeof b&&(d=function(a,c){c[b]=q(a)}),c=0;c<a.length;c++)ed[a[c]]=d}function R(a,b){Q(a,function(a,c,d,e){d._w=d._w||{},b(a,d._w,d,e)})}function S(a,b,c){null!=b&&f(ed,a)&&ed[a](b,c._a,c,a)}function T(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function U(a){return this._months[a.month()]}function V(a){return this._monthsShort[a.month()]}function W(a,b,c){var d,e,f;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;12>d;d++){if(e=h([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d}}function X(a,b){var c;return"string"==typeof b&&(b=a.localeData().monthsParse(b),"number"!=typeof b)?a:(c=Math.min(a.date(),T(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a)}function Y(b){return null!=b?(X(this,b),a.updateOffset(this,!0),this):D(this,"Month")}function Z(){return T(this.year(),this.month())}function $(a){var b,c=a._a;return c&&-2===j(a).overflow&&(b=c[gd]<0||c[gd]>11?gd:c[hd]<1||c[hd]>T(c[fd],c[gd])?hd:c[id]<0||c[id]>24||24===c[id]&&(0!==c[jd]||0!==c[kd]||0!==c[ld])?id:c[jd]<0||c[jd]>59?jd:c[kd]<0||c[kd]>59?kd:c[ld]<0||c[ld]>999?ld:-1,j(a)._overflowDayOfYear&&(fd>b||b>hd)&&(b=hd),j(a).overflow=b),a}function _(b){a.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+b)}function aa(a,b){var c=!0;return g(function(){return c&&(_(a+"\n"+(new Error).stack),c=!1),b.apply(this,arguments)},b)}function ba(a,b){od[a]||(_(b),od[a]=!0)}function ca(a){var b,c,d=a._i,e=pd.exec(d);if(e){for(j(a).iso=!0,b=0,c=qd.length;c>b;b++)if(qd[b][1].exec(d)){a._f=qd[b][0];break}for(b=0,c=rd.length;c>b;b++)if(rd[b][1].exec(d)){a._f+=(e[6]||" ")+rd[b][0];break}d.match(ad)&&(a._f+="Z"),va(a)}else a._isValid=!1}function da(b){var c=sd.exec(b._i);return null!==c?void(b._d=new Date(+c[1])):(ca(b),void(b._isValid===!1&&(delete b._isValid,a.createFromInputFallback(b))))}function ea(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function fa(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function ga(a){return ha(a)?366:365}function ha(a){return a%4===0&&a%100!==0||a%400===0}function ia(){return ha(this.year())}function ja(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=Da(a).add(f,"d"),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function ka(a){return ja(a,this._week.dow,this._week.doy).week}function la(){return this._week.dow}function ma(){return this._week.doy}function na(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")}function oa(a){var b=ja(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")}function pa(a,b,c,d,e){var f,g=6+e-d,h=fa(a,0,1+g),i=h.getUTCDay();return e>i&&(i+=7),c=null!=c?1*c:e,f=1+g+7*(b-1)-i+c,{year:f>0?a:a-1,dayOfYear:f>0?f:ga(a-1)+f}}function qa(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")}function ra(a,b,c){return null!=a?a:null!=b?b:c}function sa(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function ta(a){var b,c,d,e,f=[];if(!a._d){for(d=sa(a),a._w&&null==a._a[hd]&&null==a._a[gd]&&ua(a),a._dayOfYear&&(e=ra(a._a[fd],d[fd]),a._dayOfYear>ga(e)&&(j(a)._overflowDayOfYear=!0),c=fa(e,0,a._dayOfYear),a._a[gd]=c.getUTCMonth(),a._a[hd]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=f[b]=d[b];for(;7>b;b++)a._a[b]=f[b]=null==a._a[b]?2===b?1:0:a._a[b];24===a._a[id]&&0===a._a[jd]&&0===a._a[kd]&&0===a._a[ld]&&(a._nextDay=!0,a._a[id]=0),a._d=(a._useUTC?fa:ea).apply(null,f),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),a._nextDay&&(a._a[id]=24)}}function ua(a){var b,c,d,e,f,g,h;b=a._w,null!=b.GG||null!=b.W||null!=b.E?(f=1,g=4,c=ra(b.GG,a._a[fd],ja(Da(),1,4).year),d=ra(b.W,1),e=ra(b.E,1)):(f=a._locale._week.dow,g=a._locale._week.doy,c=ra(b.gg,a._a[fd],ja(Da(),f,g).year),d=ra(b.w,1),null!=b.d?(e=b.d,f>e&&++d):e=null!=b.e?b.e+f:f),h=pa(c,d,e,g,f),a._a[fd]=h.year,a._dayOfYear=h.dayOfYear}function va(b){if(b._f===a.ISO_8601)return void ca(b);b._a=[],j(b).empty=!0;var c,d,e,f,g,h=""+b._i,i=h.length,k=0;for(e=L(b._f,b._locale).match(Nc)||[],c=0;c<e.length;c++)f=e[c],d=(h.match(O(f,b))||[])[0],d&&(g=h.substr(0,h.indexOf(d)),g.length>0&&j(b).unusedInput.push(g),h=h.slice(h.indexOf(d)+d.length),k+=d.length),Qc[f]?(d?j(b).empty=!1:j(b).unusedTokens.push(f),S(f,d,b)):b._strict&&!d&&j(b).unusedTokens.push(f);j(b).charsLeftOver=i-k,h.length>0&&j(b).unusedInput.push(h),j(b).bigHour===!0&&b._a[id]<=12&&b._a[id]>0&&(j(b).bigHour=void 0),b._a[id]=wa(b._locale,b._a[id],b._meridiem),ta(b),$(b)}function wa(a,b,c){var d;return null==c?b:null!=a.meridiemHour?a.meridiemHour(b,c):null!=a.isPM?(d=a.isPM(c),d&&12>b&&(b+=12),d||12!==b||(b=0),b):b}function xa(a){var b,c,d,e,f;if(0===a._f.length)return j(a).invalidFormat=!0,void(a._d=new Date(0/0));for(e=0;e<a._f.length;e++)f=0,b=m({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._f=a._f[e],va(b),k(b)&&(f+=j(b).charsLeftOver,f+=10*j(b).unusedTokens.length,j(b).score=f,(null==d||d>f)&&(d=f,c=b));g(a,c||b)}function ya(a){if(!a._d){var b=B(a._i);a._a=[b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],ta(a)}}function za(a){var b=new n($(Aa(a)));return b._nextDay&&(b.add(1,"d"),b._nextDay=void 0),b}function Aa(a){var b=a._i,e=a._f;return a._locale=a._locale||y(a._l),null===b||void 0===e&&""===b?l({nullInput:!0}):("string"==typeof b&&(a._i=b=a._locale.preparse(b)),o(b)?new n($(b)):(c(e)?xa(a):e?va(a):d(b)?a._d=b:Ba(a),a))}function Ba(b){var f=b._i;void 0===f?b._d=new Date:d(f)?b._d=new Date(+f):"string"==typeof f?da(b):c(f)?(b._a=e(f.slice(0),function(a){return parseInt(a,10)}),ta(b)):"object"==typeof f?ya(b):"number"==typeof f?b._d=new Date(f):a.createFromInputFallback(b)}function Ca(a,b,c,d,e){var f={};return"boolean"==typeof c&&(d=c,c=void 0),f._isAMomentObject=!0,f._useUTC=f._isUTC=e,f._l=c,f._i=a,f._f=b,f._strict=d,za(f)}function Da(a,b,c,d){return Ca(a,b,c,d,!1)}function Ea(a,b){var d,e;if(1===b.length&&c(b[0])&&(b=b[0]),!b.length)return Da();for(d=b[0],e=1;e<b.length;++e)(!b[e].isValid()||b[e][a](d))&&(d=b[e]);return d}function Fa(){var a=[].slice.call(arguments,0);return Ea("isBefore",a)}function Ga(){var a=[].slice.call(arguments,0);return Ea("isAfter",a)}function Ha(a){var b=B(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=y(),this._bubble()}function Ia(a){return a instanceof Ha}function Ja(a,b){H(a,0,0,function(){var a=this.utcOffset(),c="+";return 0>a&&(a=-a,c="-"),c+G(~~(a/60),2)+b+G(~~a%60,2)})}function Ka(a){var b=(a||"").match(ad)||[],c=b[b.length-1]||[],d=(c+"").match(xd)||["-",0,0],e=+(60*d[1])+q(d[2]);return"+"===d[0]?e:-e}function La(b,c){var e,f;return c._isUTC?(e=c.clone(),f=(o(b)||d(b)?+b:+Da(b))-+e,e._d.setTime(+e._d+f),a.updateOffset(e,!1),e):Da(b).local()}function Ma(a){return 15*-Math.round(a._d.getTimezoneOffset()/15)}function Na(b,c){var d,e=this._offset||0;return null!=b?("string"==typeof b&&(b=Ka(b)),Math.abs(b)<16&&(b=60*b),!this._isUTC&&c&&(d=Ma(this)),this._offset=b,this._isUTC=!0,null!=d&&this.add(d,"m"),e!==b&&(!c||this._changeInProgress?bb(this,Ya(b-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?e:Ma(this)}function Oa(a,b){return null!=a?("string"!=typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()}function Pa(a){return this.utcOffset(0,a)}function Qa(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(Ma(this),"m")),this}function Ra(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Ka(this._i)),this}function Sa(a){return a=a?Da(a).utcOffset():0,(this.utcOffset()-a)%60===0}function Ta(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ua(){if("undefined"!=typeof this._isDSTShifted)return this._isDSTShifted;var a={};if(m(a,this),a=Aa(a),a._a){var b=a._isUTC?h(a._a):Da(a._a);this._isDSTShifted=this.isValid()&&r(a._a,b.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Va(){return!this._isUTC}function Wa(){return this._isUTC}function Xa(){return this._isUTC&&0===this._offset}function Ya(a,b){var c,d,e,g=a,h=null;return Ia(a)?g={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(g={},b?g[b]=a:g.milliseconds=a):(h=yd.exec(a))?(c="-"===h[1]?-1:1,g={y:0,d:q(h[hd])*c,h:q(h[id])*c,m:q(h[jd])*c,s:q(h[kd])*c,ms:q(h[ld])*c}):(h=zd.exec(a))?(c="-"===h[1]?-1:1,g={y:Za(h[2],c),M:Za(h[3],c),d:Za(h[4],c),h:Za(h[5],c),m:Za(h[6],c),s:Za(h[7],c),w:Za(h[8],c)}):null==g?g={}:"object"==typeof g&&("from"in g||"to"in g)&&(e=_a(Da(g.from),Da(g.to)),g={},g.ms=e.milliseconds,g.M=e.months),d=new Ha(g),Ia(a)&&f(a,"_locale")&&(d._locale=a._locale),d}function Za(a,b){var c=a&&parseFloat(a.replace(",","."));return(isNaN(c)?0:c)*b}function $a(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function _a(a,b){var c;return b=La(b,a),a.isBefore(b)?c=$a(a,b):(c=$a(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c}function ab(a,b){return function(c,d){var e,f;return null===d||isNaN(+d)||(ba(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=Ya(c,d),bb(this,e,a),this}}function bb(b,c,d,e){var f=c._milliseconds,g=c._days,h=c._months;e=null==e?!0:e,f&&b._d.setTime(+b._d+f*d),g&&E(b,"Date",D(b,"Date")+g*d),h&&X(b,D(b,"Month")+h*d),e&&a.updateOffset(b,g||h)}function cb(a,b){var c=a||Da(),d=La(c,this).startOf("day"),e=this.diff(d,"days",!0),f=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse";return this.format(b&&b[f]||this.localeData().calendar(f,this,Da(c)))}function db(){return new n(this)}function eb(a,b){var c;return b=A("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=o(a)?a:Da(a),+this>+a):(c=o(a)?+a:+Da(a),c<+this.clone().startOf(b))}function fb(a,b){var c;return b=A("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=o(a)?a:Da(a),+a>+this):(c=o(a)?+a:+Da(a),+this.clone().endOf(b)<c)}function gb(a,b,c){return this.isAfter(a,c)&&this.isBefore(b,c)}function hb(a,b){var c;return b=A(b||"millisecond"),"millisecond"===b?(a=o(a)?a:Da(a),+this===+a):(c=+Da(a),+this.clone().startOf(b)<=c&&c<=+this.clone().endOf(b))}function ib(a,b,c){var d,e,f=La(a,this),g=6e4*(f.utcOffset()-this.utcOffset());return b=A(b),"year"===b||"month"===b||"quarter"===b?(e=jb(this,f),"quarter"===b?e/=3:"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:p(e)}function jb(a,b){var c,d,e=12*(b.year()-a.year())+(b.month()-a.month()),f=a.clone().add(e,"months");return 0>b-f?(c=a.clone().add(e-1,"months"),d=(b-f)/(f-c)):(c=a.clone().add(e+1,"months"),d=(b-f)/(c-f)),-(e+d)}function kb(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function lb(){var a=this.clone().utc();return 0<a.year()&&a.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():K(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):K(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function mb(b){var c=K(this,b||a.defaultFormat);return this.localeData().postformat(c)}function nb(a,b){return this.isValid()?Ya({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function ob(a){return this.from(Da(),a)}function pb(a,b){return this.isValid()?Ya({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function qb(a){return this.to(Da(),a)}function rb(a){var b;return void 0===a?this._locale._abbr:(b=y(a),null!=b&&(this._locale=b),this)}function sb(){return this._locale}function tb(a){switch(a=A(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a&&this.weekday(0),"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this}function ub(a){return a=A(a),void 0===a||"millisecond"===a?this:this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")}function vb(){return+this._d-6e4*(this._offset||0)}function wb(){return Math.floor(+this/1e3)}function xb(){return this._offset?new Date(+this):this._d}function yb(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]}function zb(){var a=this;return{years:a.year(),months:a.month(),date:a.date(),hours:a.hours(),minutes:a.minutes(),seconds:a.seconds(),milliseconds:a.milliseconds()}}function Ab(){return k(this)}function Bb(){return g({},j(this))}function Cb(){return j(this).overflow}function Db(a,b){H(0,[a,a.length],0,b)}function Eb(a,b,c){return ja(Da([a,11,31+b-c]),b,c).week}function Fb(a){var b=ja(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==a?b:this.add(a-b,"y")}function Gb(a){var b=ja(this,1,4).year;return null==a?b:this.add(a-b,"y")}function Hb(){return Eb(this.year(),1,4)}function Ib(){var a=this.localeData()._week;return Eb(this.year(),a.dow,a.doy)}function Jb(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)}function Kb(a,b){return"string"!=typeof a?a:isNaN(a)?(a=b.weekdaysParse(a),"number"==typeof a?a:null):parseInt(a,10)}function Lb(a){return this._weekdays[a.day()]}function Mb(a){return this._weekdaysShort[a.day()]}function Nb(a){return this._weekdaysMin[a.day()]}function Ob(a){var b,c,d;for(this._weekdaysParse=this._weekdaysParse||[],b=0;7>b;b++)if(this._weekdaysParse[b]||(c=Da([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b}function Pb(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=Kb(a,this.localeData()),this.add(a-b,"d")):b}function Qb(a){var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")}function Rb(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)}function Sb(a,b){H(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function Tb(a,b){return b._meridiemParse}function Ub(a){return"p"===(a+"").toLowerCase().charAt(0)}function Vb(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"}function Wb(a,b){b[ld]=q(1e3*("0."+a))}function Xb(){return this._isUTC?"UTC":""}function Yb(){return this._isUTC?"Coordinated Universal Time":""}function Zb(a){return Da(1e3*a)}function $b(){return Da.apply(null,arguments).parseZone()}function _b(a,b,c){var d=this._calendar[a];return"function"==typeof d?d.call(b,c):d}function ac(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];return b||!c?b:(this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a])}function bc(){return this._invalidDate}function cc(a){return this._ordinal.replace("%d",a)}function dc(a){return a}function ec(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)}function fc(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)}function gc(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function hc(a,b,c,d){var e=y(),f=h().set(d,b);return e[c](f,a)}function ic(a,b,c,d,e){if("number"==typeof a&&(b=a,a=void 0),a=a||"",null!=b)return hc(a,b,c,e);var f,g=[];for(f=0;d>f;f++)g[f]=hc(a,f,c,e);return g}function jc(a,b){return ic(a,b,"months",12,"month")}function kc(a,b){return ic(a,b,"monthsShort",12,"month")}function lc(a,b){return ic(a,b,"weekdays",7,"day")}function mc(a,b){return ic(a,b,"weekdaysShort",7,"day")}function nc(a,b){return ic(a,b,"weekdaysMin",7,"day")}function oc(){var a=this._data;return this._milliseconds=Wd(this._milliseconds),this._days=Wd(this._days),this._months=Wd(this._months),a.milliseconds=Wd(a.milliseconds),a.seconds=Wd(a.seconds),a.minutes=Wd(a.minutes),a.hours=Wd(a.hours),a.months=Wd(a.months),a.years=Wd(a.years),this}function pc(a,b,c,d){var e=Ya(b,c);return a._milliseconds+=d*e._milliseconds,a._days+=d*e._days,a._months+=d*e._months,a._bubble()}function qc(a,b){return pc(this,a,b,1)}function rc(a,b){return pc(this,a,b,-1)}function sc(a){return 0>a?Math.floor(a):Math.ceil(a)}function tc(){var a,b,c,d,e,f=this._milliseconds,g=this._days,h=this._months,i=this._data;return f>=0&&g>=0&&h>=0||0>=f&&0>=g&&0>=h||(f+=864e5*sc(vc(h)+g),g=0,h=0),i.milliseconds=f%1e3,a=p(f/1e3),i.seconds=a%60,b=p(a/60),i.minutes=b%60,c=p(b/60),i.hours=c%24,g+=p(c/24),e=p(uc(g)),h+=e,g-=sc(vc(e)),d=p(h/12),h%=12,i.days=g,i.months=h,i.years=d,this}function uc(a){return 4800*a/146097}function vc(a){return 146097*a/4800}function wc(a){var b,c,d=this._milliseconds;if(a=A(a),"month"===a||"year"===a)return b=this._days+d/864e5,c=this._months+uc(b),"month"===a?c:c/12;switch(b=this._days+Math.round(vc(this._months)),a){case"week":return b/7+d/6048e5;case"day":return b+d/864e5;case"hour":return 24*b+d/36e5;case"minute":return 1440*b+d/6e4;case"second":return 86400*b+d/1e3;case"millisecond":return Math.floor(864e5*b)+d;default:throw new Error("Unknown unit "+a)}}function xc(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*q(this._months/12)}function yc(a){return function(){return this.as(a)}}function zc(a){return a=A(a),this[a+"s"]()}function Ac(a){return function(){return this._data[a]}}function Bc(){return p(this.days()/7)}function Cc(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function Dc(a,b,c){var d=Ya(a).abs(),e=ke(d.as("s")),f=ke(d.as("m")),g=ke(d.as("h")),h=ke(d.as("d")),i=ke(d.as("M")),j=ke(d.as("y")),k=e<le.s&&["s",e]||1===f&&["m"]||f<le.m&&["mm",f]||1===g&&["h"]||g<le.h&&["hh",g]||1===h&&["d"]||h<le.d&&["dd",h]||1===i&&["M"]||i<le.M&&["MM",i]||1===j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,Cc.apply(null,k)}function Ec(a,b){return void 0===le[a]?!1:void 0===b?le[a]:(le[a]=b,!0)}function Fc(a){var b=this.localeData(),c=Dc(this,!a,b);return a&&(c=b.pastFuture(+this,c)),b.postformat(c)}function Gc(){var a,b,c,d=me(this._milliseconds)/1e3,e=me(this._days),f=me(this._months);a=p(d/60),b=p(a/60),d%=60,a%=60,c=p(f/12),f%=12;var g=c,h=f,i=e,j=b,k=a,l=d,m=this.asSeconds();return m?(0>m?"-":"")+"P"+(g?g+"Y":"")+(h?h+"M":"")+(i?i+"D":"")+(j||k||l?"T":"")+(j?j+"H":"")+(k?k+"M":"")+(l?l+"S":""):"P0D"}var Hc,Ic,Jc=a.momentProperties=[],Kc=!1,Lc={},Mc={},Nc=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Oc=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Pc={},Qc={},Rc=/\d/,Sc=/\d\d/,Tc=/\d{3}/,Uc=/\d{4}/,Vc=/[+-]?\d{6}/,Wc=/\d\d?/,Xc=/\d{1,3}/,Yc=/\d{1,4}/,Zc=/[+-]?\d{1,6}/,$c=/\d+/,_c=/[+-]?\d+/,ad=/Z|[+-]\d\d:?\d\d/gi,bd=/[+-]?\d+(\.\d{1,3})?/,cd=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,dd={},ed={},fd=0,gd=1,hd=2,id=3,jd=4,kd=5,ld=6;H("M",["MM",2],"Mo",function(){return this.month()+1}),H("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)}),H("MMMM",0,0,function(a){return this.localeData().months(this,a)}),z("month","M"),N("M",Wc),N("MM",Wc,Sc),N("MMM",cd),N("MMMM",cd),Q(["M","MM"],function(a,b){b[gd]=q(a)-1}),Q(["MMM","MMMM"],function(a,b,c,d){var e=c._locale.monthsParse(a,d,c._strict);null!=e?b[gd]=e:j(c).invalidMonth=a});var md="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),nd="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),od={};a.suppressDeprecationWarnings=!1;var pd=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,qd=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],rd=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],sd=/^\/?Date\((\-?\d+)/i;a.createFromInputFallback=aa("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),H(0,["YY",2],0,function(){return this.year()%100}),H(0,["YYYY",4],0,"year"),H(0,["YYYYY",5],0,"year"),H(0,["YYYYYY",6,!0],0,"year"),z("year","y"),N("Y",_c),N("YY",Wc,Sc),N("YYYY",Yc,Uc),N("YYYYY",Zc,Vc),N("YYYYYY",Zc,Vc),Q(["YYYYY","YYYYYY"],fd),Q("YYYY",function(b,c){c[fd]=2===b.length?a.parseTwoDigitYear(b):q(b)}),Q("YY",function(b,c){c[fd]=a.parseTwoDigitYear(b)}),a.parseTwoDigitYear=function(a){return q(a)+(q(a)>68?1900:2e3)};var td=C("FullYear",!1);H("w",["ww",2],"wo","week"),H("W",["WW",2],"Wo","isoWeek"),z("week","w"),z("isoWeek","W"),N("w",Wc),N("ww",Wc,Sc),N("W",Wc),N("WW",Wc,Sc),R(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=q(a)});var ud={dow:0,doy:6};H("DDD",["DDDD",3],"DDDo","dayOfYear"),z("dayOfYear","DDD"),N("DDD",Xc),N("DDDD",Tc),Q(["DDD","DDDD"],function(a,b,c){c._dayOfYear=q(a)}),a.ISO_8601=function(){};var vd=aa("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var a=Da.apply(null,arguments);return this>a?this:a}),wd=aa("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var a=Da.apply(null,arguments);return a>this?this:a});Ja("Z",":"),Ja("ZZ",""),N("Z",ad),N("ZZ",ad),Q(["Z","ZZ"],function(a,b,c){c._useUTC=!0,c._tzm=Ka(a)});var xd=/([\+\-]|\d\d)/gi;a.updateOffset=function(){};var yd=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,zd=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Ya.fn=Ha.prototype;var Ad=ab(1,"add"),Bd=ab(-1,"subtract");a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Cd=aa("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});H(0,["gg",2],0,function(){return this.weekYear()%100}),H(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Db("gggg","weekYear"),Db("ggggg","weekYear"),Db("GGGG","isoWeekYear"),Db("GGGGG","isoWeekYear"),z("weekYear","gg"),z("isoWeekYear","GG"),N("G",_c),N("g",_c),N("GG",Wc,Sc),N("gg",Wc,Sc),N("GGGG",Yc,Uc),N("gggg",Yc,Uc),N("GGGGG",Zc,Vc),N("ggggg",Zc,Vc),R(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=q(a)}),R(["gg","GG"],function(b,c,d,e){c[e]=a.parseTwoDigitYear(b)}),H("Q",0,0,"quarter"),z("quarter","Q"),N("Q",Rc),Q("Q",function(a,b){b[gd]=3*(q(a)-1)}),H("D",["DD",2],"Do","date"),z("date","D"),N("D",Wc),N("DD",Wc,Sc),N("Do",function(a,b){return a?b._ordinalParse:b._ordinalParseLenient}),Q(["D","DD"],hd),Q("Do",function(a,b){b[hd]=q(a.match(Wc)[0],10)});var Dd=C("Date",!0);H("d",0,"do","day"),H("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)}),H("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)}),H("dddd",0,0,function(a){return this.localeData().weekdays(this,a)}),H("e",0,0,"weekday"),H("E",0,0,"isoWeekday"),z("day","d"),z("weekday","e"),z("isoWeekday","E"),N("d",Wc),N("e",Wc),N("E",Wc),N("dd",cd),N("ddd",cd),N("dddd",cd),R(["dd","ddd","dddd"],function(a,b,c){var d=c._locale.weekdaysParse(a);null!=d?b.d=d:j(c).invalidWeekday=a}),R(["d","e","E"],function(a,b,c,d){b[d]=q(a)});var Ed="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Fd="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Gd="Su_Mo_Tu_We_Th_Fr_Sa".split("_");H("H",["HH",2],0,"hour"),H("h",["hh",2],0,function(){return this.hours()%12||12}),Sb("a",!0),Sb("A",!1),z("hour","h"),N("a",Tb),N("A",Tb),N("H",Wc),N("h",Wc),N("HH",Wc,Sc),N("hh",Wc,Sc),Q(["H","HH"],id),Q(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a),c._meridiem=a}),Q(["h","hh"],function(a,b,c){b[id]=q(a),j(c).bigHour=!0});var Hd=/[ap]\.?m?\.?/i,Id=C("Hours",!0);H("m",["mm",2],0,"minute"),z("minute","m"),N("m",Wc),N("mm",Wc,Sc),Q(["m","mm"],jd);var Jd=C("Minutes",!1);H("s",["ss",2],0,"second"),z("second","s"),N("s",Wc),N("ss",Wc,Sc),Q(["s","ss"],kd);var Kd=C("Seconds",!1);H("S",0,0,function(){return~~(this.millisecond()/100)}),H(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),H(0,["SSS",3],0,"millisecond"),H(0,["SSSS",4],0,function(){return 10*this.millisecond()}),H(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),H(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),H(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),H(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),H(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),z("millisecond","ms"),N("S",Xc,Rc),N("SS",Xc,Sc),N("SSS",Xc,Tc);var Ld;for(Ld="SSSS";Ld.length<=9;Ld+="S")N(Ld,$c);for(Ld="S";Ld.length<=9;Ld+="S")Q(Ld,Wb);var Md=C("Milliseconds",!1);H("z",0,0,"zoneAbbr"),H("zz",0,0,"zoneName");var Nd=n.prototype;Nd.add=Ad,Nd.calendar=cb,Nd.clone=db,Nd.diff=ib,Nd.endOf=ub,Nd.format=mb,Nd.from=nb,Nd.fromNow=ob,Nd.to=pb,Nd.toNow=qb,Nd.get=F,Nd.invalidAt=Cb,Nd.isAfter=eb,Nd.isBefore=fb,Nd.isBetween=gb,Nd.isSame=hb,Nd.isValid=Ab,Nd.lang=Cd,Nd.locale=rb,Nd.localeData=sb,Nd.max=wd,Nd.min=vd,Nd.parsingFlags=Bb,Nd.set=F,Nd.startOf=tb,Nd.subtract=Bd,Nd.toArray=yb,Nd.toObject=zb,Nd.toDate=xb,Nd.toISOString=lb,Nd.toJSON=lb,Nd.toString=kb,Nd.unix=wb,Nd.valueOf=vb,Nd.year=td,Nd.isLeapYear=ia,Nd.weekYear=Fb,Nd.isoWeekYear=Gb,Nd.quarter=Nd.quarters=Jb,Nd.month=Y,Nd.daysInMonth=Z,Nd.week=Nd.weeks=na,Nd.isoWeek=Nd.isoWeeks=oa,Nd.weeksInYear=Ib,Nd.isoWeeksInYear=Hb,Nd.date=Dd,Nd.day=Nd.days=Pb,Nd.weekday=Qb,Nd.isoWeekday=Rb,Nd.dayOfYear=qa,Nd.hour=Nd.hours=Id,Nd.minute=Nd.minutes=Jd,Nd.second=Nd.seconds=Kd,Nd.millisecond=Nd.milliseconds=Md,Nd.utcOffset=Na,Nd.utc=Pa,Nd.local=Qa,Nd.parseZone=Ra,Nd.hasAlignedHourOffset=Sa,Nd.isDST=Ta,Nd.isDSTShifted=Ua,Nd.isLocal=Va,Nd.isUtcOffset=Wa,Nd.isUtc=Xa,Nd.isUTC=Xa,Nd.zoneAbbr=Xb,Nd.zoneName=Yb,Nd.dates=aa("dates accessor is deprecated. Use date instead.",Dd),Nd.months=aa("months accessor is deprecated. Use month instead",Y),Nd.years=aa("years accessor is deprecated. Use year instead",td),Nd.zone=aa("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Oa);var Od=Nd,Pd={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Qd={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Rd="Invalid date",Sd="%d",Td=/\d{1,2}/,Ud={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Vd=s.prototype;Vd._calendar=Pd,Vd.calendar=_b,Vd._longDateFormat=Qd,Vd.longDateFormat=ac,Vd._invalidDate=Rd,Vd.invalidDate=bc,Vd._ordinal=Sd,Vd.ordinal=cc,Vd._ordinalParse=Td,Vd.preparse=dc,Vd.postformat=dc,Vd._relativeTime=Ud,Vd.relativeTime=ec,Vd.pastFuture=fc,Vd.set=gc,Vd.months=U,Vd._months=md,Vd.monthsShort=V,Vd._monthsShort=nd,Vd.monthsParse=W,Vd.week=ka,Vd._week=ud,Vd.firstDayOfYear=ma,Vd.firstDayOfWeek=la,Vd.weekdays=Lb,Vd._weekdays=Ed,Vd.weekdaysMin=Nb,Vd._weekdaysMin=Gd,Vd.weekdaysShort=Mb,
Vd._weekdaysShort=Fd,Vd.weekdaysParse=Ob,Vd.isPM=Ub,Vd._meridiemParse=Hd,Vd.meridiem=Vb,w("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,c=1===q(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),a.lang=aa("moment.lang is deprecated. Use moment.locale instead.",w),a.langData=aa("moment.langData is deprecated. Use moment.localeData instead.",y);var Wd=Math.abs,Xd=yc("ms"),Yd=yc("s"),Zd=yc("m"),$d=yc("h"),_d=yc("d"),ae=yc("w"),be=yc("M"),ce=yc("y"),de=Ac("milliseconds"),ee=Ac("seconds"),fe=Ac("minutes"),ge=Ac("hours"),he=Ac("days"),ie=Ac("months"),je=Ac("years"),ke=Math.round,le={s:45,m:45,h:22,d:26,M:11},me=Math.abs,ne=Ha.prototype;ne.abs=oc,ne.add=qc,ne.subtract=rc,ne.as=wc,ne.asMilliseconds=Xd,ne.asSeconds=Yd,ne.asMinutes=Zd,ne.asHours=$d,ne.asDays=_d,ne.asWeeks=ae,ne.asMonths=be,ne.asYears=ce,ne.valueOf=xc,ne._bubble=tc,ne.get=zc,ne.milliseconds=de,ne.seconds=ee,ne.minutes=fe,ne.hours=ge,ne.days=he,ne.weeks=Bc,ne.months=ie,ne.years=je,ne.humanize=Fc,ne.toISOString=Gc,ne.toString=Gc,ne.toJSON=Gc,ne.locale=rb,ne.localeData=sb,ne.toIsoString=aa("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Gc),ne.lang=Cd,H("X",0,0,"unix"),H("x",0,0,"valueOf"),N("x",_c),N("X",bd),Q("X",function(a,b,c){c._d=new Date(1e3*parseFloat(a,10))}),Q("x",function(a,b,c){c._d=new Date(q(a))}),a.version="2.10.6",b(Da),a.fn=Od,a.min=Fa,a.max=Ga,a.utc=h,a.unix=Zb,a.months=jc,a.isDate=d,a.locale=w,a.invalid=l,a.duration=Ya,a.isMoment=o,a.weekdays=lc,a.parseZone=$b,a.localeData=y,a.isDuration=Ia,a.monthsShort=kc,a.weekdaysMin=nc,a.defineLocale=x,a.weekdaysShort=mc,a.normalizeUnits=A,a.relativeTimeThreshold=Ec;var oe=a;return oe.defineLocale("zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"Ah点mm分",LTS:"Ah点m分s秒",L:"YYYY-MM-DD",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日Ah点mm分",LLLL:"YYYY年MMMD日ddddAh点mm分",l:"YYYY-MM-DD",ll:"YYYY年MMMD日",lll:"YYYY年MMMD日Ah点mm分",llll:"YYYY年MMMD日ddddAh点mm分"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(a,b){return 12===a&&(a=0),"凌晨"===b||"早上"===b||"上午"===b?a:"下午"===b||"晚上"===b?a+12:a>=11?a:a+12},meridiem:function(a,b){var c=100*a+b;return 600>c?"凌晨":900>c?"早上":1130>c?"上午":1230>c?"中午":1800>c?"下午":"晚上"},calendar:{sameDay:function(){return 0===this.minutes()?"[今天]Ah[点整]":"[今天]LT"},nextDay:function(){return 0===this.minutes()?"[明天]Ah[点整]":"[明天]LT"},lastDay:function(){return 0===this.minutes()?"[昨天]Ah[点整]":"[昨天]LT"},nextWeek:function(){var a,b;return a=moment().startOf("week"),b=this.unix()-a.unix()>=604800?"[下]":"[本]",0===this.minutes()?b+"dddAh点整":b+"dddAh点mm"},lastWeek:function(){var a,b;return a=moment().startOf("week"),b=this.unix()<a.unix()?"[上]":"[本]",0===this.minutes()?b+"dddAh点整":b+"dddAh点mm"},sameElse:"LL"},ordinalParse:/\d{1,2}(日|月|周)/,ordinal:function(a,b){switch(b){case"d":case"D":case"DDD":return a+"日";case"M":return a+"月";case"w":case"W":return a+"周";default:return a}},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},week:{dow:1,doy:4}}),oe}),function(){define("cs!timeStatus",["require","exports","module","moment"],function(a){var b;return b=a("moment"),{getNow:function(){var a,c;return c=$("#py_header_data").data("server-time"),a=c?c.trim():b()},enrollment:function(a,c){var d,e,f;return e=this.getNow(),f=!a||b(a).isBefore(e)?1:0,d=!c||b(c).isAfter(e)?1:0,f&&d?1:f?0:-1},courseOpen:function(a,c){var d,e,f;return e=this.getNow(),f=a&&b(a).isBefore(e)?1:0,d=!c||b(c).isAfter(e)?1:0,f&&d?1:f?0:-1},main:function(a,c,d,e){var f,g,h,i;if(g=this.enrollment(a,c,h),f=this.courseOpen(d,e,h),h=$("#py_header_data").data("server-time").trim(),-1===f){if(-1===g)return a&&(i=h?b(a).from(h):b(a).fromNow()),{state:"preStart_register",time:i||"即将"};if(1===g)return a&&(i=h?b(d).from(h):b(d).fromNow()),{state:"preStart_course",time:i||"即将"};if(0===g)return a&&(i=h?b(d).from(h):b(d).fromNow()),{state:"preCourse_postRegister",time:i||"即将"}}else{if(1!==f)return 1===g?{state:"end_course"}:{state:"end_register"};if(1===g)return d&&(i=h?b(h).from(d,1):b().from(d,1)),{state:"start_course",time:i};if(0===g)return c&&(i=h?b(h).from(c,1):b().from(c,1)),{state:"startCourse_postRegister",time:i}}}}})}.call(this),define("http://www.xuetangx.com/static/xuetangx/js/jsrender.min",["jquery"],function(){!function(a,b,c){"use strict";function d(a){return a}function e(a){return a}function f(a){ua._dbgMode=a,S=a?"Unavailable (nested view): use #getIndex()":"",sa("dbg",ra.dbg=qa.dbg=a?e:d)}function g(a){this.name=(O.link?"JsViews":"JsRender")+" Error",this.message=a||this.name}function h(a,b){for(var c in b)a[c]=b[c];return a}function i(a){return"function"==typeof a}function j(a,b,c){return(!ta.rTag||a)&&(T=a?a.charAt(0):T,U=a?a.charAt(1):U,V=b?b.charAt(0):V,W=b?b.charAt(1):W,X=c||X,a="\\"+T+"(\\"+X+")?\\"+U,b="\\"+V+"\\"+W,Q="(?:(?:(\\w+(?=[\\/\\s\\"+V+"]))|(?:(\\w+)?(:)|(>)|!--((?:[^-]|-(?!-))*)--|(\\*)))\\s*((?:[^\\"+V+"]|\\"+V+"(?!\\"+W+"))*?)",ta.rTag=Q+")",Q=new RegExp(a+Q+"(\\/)?|(?:\\/(\\w+)))"+b,"g"),R=new RegExp("<.*>|([^\\\\]|^)[{}]|"+a+".*"+b)),[T,U,V,W,X]}function k(a,b){b||(b=a,a=c);var d,e,f,g,h=this,i=!b||"root"===b;if(a){if(g=h.type===b?h:c,!g)if(d=h.views,h._.useKey){for(e in d)if(g=d[e].get(a,b))break}else for(e=0,f=d.length;!g&&f>e;e++)g=d[e].get(a,b)}else if(i)for(;h.parent.parent;)g=h=h.parent;else for(;h&&!g;)g=h.type===b?h:c,h=h.parent;return g}function l(){var a=this.get("item");return a?a.index:c}function m(){return this.index}function n(b){var d,e=this,f=e.linkCtx,g=(e.ctx||{})[b];return g===c&&f&&f.ctx&&(g=f.ctx[b]),g===c&&(g=ra[b]),g&&i(g)&&!g._wrp&&(d=function(){return g.apply(this&&this!==a?this:e,arguments)},d._wrp=1,h(d,g)),d||g}function o(a,b,d){var e,f,g,h=+d===d&&d,i=b.linkCtx;if(h&&(d=(h=b.tmpl.bnds[h-1])(b.data,b,oa)),f=d.args[0],a||h){e=i&&i.tag,e||(e={_:{inline:!i,bnd:h},tagName:":",cvt:a,flow:!0,tagCtx:d,_is:"tag"},i&&(i.tag=e,e.linkCtx=i,d.ctx=K(d.ctx,i.view.ctx)),ta._lnk(e));for(g in d.props)fa.test(g)&&(e[g]=d.props[g]);d.view=b,e.ctx=d.ctx||{},delete d.ctx,b._.tag=e,f=p(e,e.convert||"true"!==a&&a)[0],f=h&&b._.onRender?b._.onRender(f,b,h):f,b._.tag=c}return f!=c?f:""}function p(a,b){var c=a.tagCtx,d=c.view,e=c.args;return b=b&&(""+b===b?d.getRsc("converters",b)||D("Unknown converter: '"+b+"'"):b),e=e.length||c.index?b?e.slice():e:[d.data],b&&(b.depends&&(a.depends=ta.getDeps(a.depends,a,b.depends,b)),e[0]=b.apply(a,e)),e}function q(a,b){for(var d,e,f=this;d===c&&f;)e=f.tmpl[a],d=e&&e[b],f=f.parent;return d||oa[a][b]}function r(a,b,d,e,f){var g,i,j,k,l,m,n,o,q,r,s,t,u,v,w,x,y,z,A,B,E="",F=+e===e&&e,G=b.linkCtx||0,H=b.ctx,I=d||b.tmpl;for("tag"===a._is&&(i=a,a=i.tagName,e=i.tagCtxs),i=i||G.tag,F&&(e=(t=I.bnds[F-1])(b.data,b,oa)),n=e.length,m=0;n>m;m++){if(m||d&&i||(u=b.getRsc("tags",a)||D("Unknown tag: {{"+a+"}}")),q=e[m],G.tag||(s=q.tmpl,s=q.content=s&&I.tmpls[s-1],h(q,{tmpl:(i?i:u).template||s,render:C,index:m,view:b,ctx:K(q.ctx,H)})),(d=q.props.tmpl)&&(d=""+d===d?b.getRsc("templates",d)||pa(d):d,q.tmpl=d),i||(u._ctr?(i=new u._ctr,v=!!i.init,i.attr=i.attr||u.attr||c):ta._lnk(i={render:u.render}),i._={inline:!G},G&&(G.attr=i.attr=G.attr||i.attr,G.tag=i,i.linkCtx=G),(i._.bnd=t||G.fn)?i._.arrVws={}:i.dataBoundOnly&&D("{^{"+a+"}} tag must be data-bound"),i.tagName=a,i.parent=l=H&&H.tag,i._is="tag",i._def=u,i.tagCtxs=e),!m)for(z in A=q.props)fa.test(z)&&(i[z]=A[z]);q.tag=i,i.dataMap&&i.tagCtxs&&(q.map=i.tagCtxs[m].map),i.flow||(r=q.ctx=q.ctx||{},j=i.parents=r.parentTags=H&&K(r.parentTags,H.parentTags)||{},l&&(j[l.tagName]=l),r.tag=i)}for(b._.tag=i,i.rendering={},m=0;n>m;m++)q=i.tagCtx=i.tagCtxs[m],A=q.props,y=p(i,i.convert),(w=A.dataMap||i.dataMap)&&(y.length||A.dataMap)&&(x=q.map,(!x||x.src!==y[0]||f)&&(x&&x.src&&x.unmap(),x=q.map=w.map(y[0],A)),y=[x.tgt]),i.ctx=q.ctx,!m&&v&&(B=i.template,i.init(q,G,i.ctx),v=c,i.template!==B&&(i._.tmpl=i.template)),o=c,g=i.render,(g=i.render)&&(o=g.apply(i,y)),y=y.length?y:[b],o=o!==c?o:q.render(y[0],!0)||(f?c:""),E=E?E+(o||""):o;return delete i.rendering,i.tagCtx=i.tagCtxs[0],i.ctx=i.tagCtx.ctx,i._.inline&&(k=i.attr)&&k!==ka&&(E="text"===k?qa.html(E):""),F&&b._.onRender?b._.onRender(E,b,F):E}function s(a,b,c,d,e,f,g,h){var i,j,k,m=this,n="array"===b,o={key:0,useKey:n?0:1,id:""+ia++,onRender:h,bnds:{}};m.data=d,m.tmpl=e,m.content=g,m.views=n?[]:{},m.parent=c,m.type=b,m._=o,m.linked=!!h,c?(i=c.views,j=c._,j.useKey?(i[o.key="_"+j.useKey++]=m,m.index=S,m.getIndex=l,k=j.tag,o.bnd=n&&(!k||!!k._.bnd&&k)):i.splice(o.key=m.index=f,0,m),m.ctx=a||c.ctx):m.ctx=a}function t(a){var b,c,d,e,f,g,h;for(b in na)if(f=na[b],(g=f.compile)&&(c=a[b+"s"]))for(d in c)e=c[d]=g(d,c[d],a),e&&(h=ta.onStore[b])&&h(d,e,g)}function u(a,b,d){var e,f;return i(b)?b={depends:b.depends,render:b}:(b.baseTag&&(b.flow=!!b.flow,b=h(h({},b.baseTag),b)),(f=b.template)!==c&&(b.template=""+f===f?pa[f]||pa(f):f),b.init!==!1&&(e=b._ctr=function(){},(e.prototype=b).constructor=e)),d&&(b._parentTmpl=d),b}function v(d,e,f,g){function h(e){if(""+e===e||e.nodeType>0){try{j=e.nodeType>0?e:!R.test(e)&&b&&b(a.document).find(e)[0]}catch(h){}return j&&(e=pa[d=d||j.getAttribute(la)],e||(d=d||"_"+ha++,j.setAttribute(la,d),e=pa[d]=v(d,j.innerHTML,f,g)),j=c),e}}var i,j;return e=e||"",i=h(e),g=g||(e.markup?e:{}),g.tmplName=d,f&&(g._parentTmpl=f),!i&&e.markup&&(i=h(e.markup))&&i.fn&&(i.debug!==e.debug||i.allowCode!==e.allowCode)&&(i=i.markup),i!==c?(d&&!f&&(ma[d]=function(){return e.render.apply(e,arguments)}),i.fn||e.fn?i.fn&&(e=d&&d!==i.tmplName?K(g,i):i):(e=x(i,g),F(i.replace(aa,"\\$&"),e)),t(g),e):void 0}function w(a){function b(b,c){this.tgt=a.getTgt(b,c)}return i(a)&&(a={getTgt:a}),a.baseMap&&(a=h(h({},a.baseMap),a)),a.map=function(a,c){return new b(a,c)},a}function x(a,b){var c,d=ua.wrapMap||{},e=h({markup:a,tmpls:[],links:{},tags:{},bnds:[],_is:"template",render:B},b);return b.htmlTag||(c=da.exec(a),e.htmlTag=c?c[1].toLowerCase():""),c=d[e.htmlTag],c&&c!==d.div&&(e.markup=O.trim(e.markup)),e}function y(a,b){function d(f,g,h){var i,j,k,l;if(f&&"object"==typeof f&&!f.nodeType&&!f.markup&&!f.getTgt){for(k in f)d(k,f[k],g);return oa}return g===c&&(g=f,f=c),f&&""+f!==f&&(h=g,g=f,f=c),l=h?h[e]=h[e]||{}:d,j=b.compile,null===g?f&&delete l[f]:(g=j?g=j(f,g,h):g,f&&(l[f]=g)),j&&g&&(g._is=a),g&&(i=ta.onStore[a])&&i(f,g,j),g}var e=a+"s";oa[e]=d,na[a]=b}function z(a,b){var c=this.jquery&&(this[0]||D('Unknown template: "'+this.selector+'"')),d=c.getAttribute(la);return B.call(d?pa[d]:pa(c),a,b)}function A(a,b,c){if(ua._dbgMode)try{return a.fn(b,c,oa)}catch(d){return D(d,c)}return a.fn(b,c,oa)}function B(a,b,c,d,e,f){var g=this;return d||!g.fn._nvw||O.isArray(a)?C.call(g,a,b,c,d,e,f):A(g,a,{tmpl:g})}function C(a,b,d,e,f,g){var h,i,j,k,l,m,n,o,p,q,r,t,u,v,w=this,x="";if(!!b===b&&(d=b,b=c),f===!0&&(n=!0,f=0),w.tag?(o=w,w=w.tag,q=w._,t=w.tagName,u=q.tmpl||o.tmpl,v=w.attr&&w.attr!==ka,b=K(b,w.ctx),p=o.content,o.props.link===!1&&(b=b||{},b.link=!1),e=e||o.view,a=arguments.length?a:e):u=w,u&&(!e&&a&&"view"===a._is&&(e=a),e&&(p=p||e.content,g=g||e._.onRender,a===e&&(a=e.data),b=K(b,e.ctx)),e&&e.data!==c||((b=b||{}).root=a),u.fn||(u=pa[u]||pa(u)),u)){if(g=(b&&b.link)!==!1&&!v&&g,r=g,g===!0&&(r=c,g=e._.onRender),b=u.helpers?K(u.helpers,b):b,O.isArray(a)&&!d)for(k=n?e:f!==c&&e||new s(b,"array",e,a,u,f,p,g),h=0,i=a.length;i>h;h++)j=a[h],l=new s(b,"item",k,j,u,(f||0)+h,p,g),m=A(u,j,l),x+=k._.onRender?k._.onRender(m,l):m;else(e||!u.fn._nvw)&&(k=n?e:new s(b,t||"data",e,a,u,f,p,g),q&&!w.flow&&(k.tag=w)),x+=A(u,a,k);return r?r(x,k):x}return""}function D(a,b,c){var d=ua.onError(a,b,c);if(""+a===a)throw new ta.Err(d);return!b.linkCtx&&b.linked?qa.html(d):d}function E(a){D("Syntax error\n"+a)}function F(a,b,c,d){function e(b){b-=m,b&&o.push(a.substr(m,b).replace($,"\\n"))}function f(b){b&&E('Unmatched or missing tag: "{{/'+b+'}}" in template:\n'+a)}function g(g,h,l,q,r,s,t,u,v,w,x,y){s&&(r=":",q=ka),w=w||c;var z=(h||c)&&[],A="",B="",C="",D="",F="",H="",J="",K="",L=!w&&!r&&!t;l=l||(v=v||"#data",r),e(y),m=y+g.length,u?k&&o.push(["*","\n"+v.replace(_,"$1")+"\n"]):l?("else"===l&&(ca.test(v)&&E('for "{{else if expr}}" use "{{else expr}}"'),z=p[7],p[8]=a.substring(p[8],y),p=n.pop(),o=p[2],L=!0),v&&I(v.replace($," "),z,b).replace(ba,function(a,b,c,d,e,f,g,h){return g?(B+=f+",",D+="'"+h+"',"):c?(C+=d+f+",",H+=d+"'"+h+"',"):b?J+=f:("trigger"===e&&(K+=f),A+=d+f+",",F+=d+"'"+h+"',",j=j||fa.test(e)),""}).slice(0,-1),i=[l,q||!!d||j||"",L&&[],G(D,F,H),G(B,A,C),J,K,z||0],o.push(i),L&&(n.push(p),p=i,p[8]=m)):x&&(f(x!==p[0]&&"else"!==p[0]&&x),p[8]=a.substring(p[8],y),p=n.pop()),f(!p&&x),o=p[2]}var h,i,j,k=b&&b.allowCode,l=[],m=0,n=[],o=l,p=[,,l];return c&&(a=T+a+W),f(n[0]&&n[0][2].pop()[0]),a.replace(Q,g),e(a.length),(m=l[l.length-1])&&f(""+m!==m&&+m[8]===m[8]&&m[0]),c?(h=J(l,a,c),h.paths=l[0][7]):h=J(l,b),h._nvw&&(h._nvw=!/[~#]/.test(a)),h}function G(a,b,c){return[a.slice(0,-1),b.slice(0,-1),c.slice(0,-1)]}function H(a,b){return"\n	"+(b?b+":{":"")+"args:["+a[0]+"]"+(a[1]||!b?",\n	props:{"+a[1]+"}":"")+(a[2]?",\n	ctx:{"+a[2]+"}":"")}function I(a,b,c){function d(d,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,G,H,I){function J(a,c,d,h,i,j,k,l){if(d&&(b&&("linkTo"===e&&(f=b._jsvto=b._jsvto||[],f.push(r)),(!e||g)&&b.push(r.slice(c.length))),"."!==d)){var m=(h?'view.hlp("'+h+'")':i?"view":"data")+(l?(j?"."+j:h?"":i?"":"."+d)+(k||""):(l=h?"":i?j||"":d,""));return m+=l?"."+l:"",c+("http://www.xuetangx.com/static/xuetangx/js/view.data"===m.slice(0,9)?m.slice(5):m)}return a}s=s||"",p=p||o||y,r=r||v,w=w||D||"";var K,L,M;return!t||i||h?(b&&C&&!i&&!h&&(!e||g||f)&&(K=m[n],I.length-1>H-K&&(K=I.slice(K,H+1),C=U+":"+K+V,M=k[C],M||(k[C]=1,k[C]=M=F(C,c||b,!0),M.paths.push({_jsvOb:M})),1!==M&&(f||b).push({_jsvOb:M}))),i?(i=!z,i?d:'"'):h?(h=!A,h?d:'"'):(p?(n++,m[n]=H++,p):"")+(G?n?"":(j=I.slice(j,H),(e?(e=g=f=!1,"\b"):"\b,")+j+(j=H+d.length,"\b")):u?(n&&E(a),e=r,g=q,j=H+d.length,r+":"):r?r.split("^").join(".").replace(Y,J)+(w?(l[++n]=!0,"."!==r.charAt(0)&&(m[n]=H),L?"":w):s):s?s:B?(l[n--]=!1,B+(w?(l[++n]=!0,w):"")):x?(l[n]||E(a),","):o?"":(i=z,h=A,'"'))):void E(a)}var e,f,g,h,i,j=0,k=c?c.links:b&&(b.links=b.links||{}),l={},m={0:-1},n=0;return(a+(c?" ":"")).replace(/\)\^/g,").").replace(Z,d)}function J(a,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,y,z,A,B,C,D,F,G,I,K=0,L="",M={},N=a.length;for(""+c===c?(t=d?'data-link="'+c.replace($," ").slice(1,-1)+'"':c,c=0):(t=c.tmplName||"unnamed",c.allowCode&&(M.allowCode=!0),c.debug&&(M.debug=!0),p=c.bnds,s=c.tmpls),e=0;N>e;e++)if(f=a[e],""+f===f)L+='\n+"'+f+'"';else if(g=f[0],"*"===g)L+=";\n"+f[1]+"\nret=ret";else{if(h=f[1],w=f[2],i=H(f[3],"params")+"},"+H(r=f[4]),F=f[5],I=f[6],y=f[8],(B="else"===g)||(K=0,p&&(q=f[7])&&(K=p.push(q))),(C=":"===g)?h&&(g=h===ka?">":h+g):(w&&(u=x(y,M),u.tmplName=t+"/"+g,J(w,u),s.push(u)),B||(v=g,A=L,L=""),z=a[e+1],z=z&&"else"===z[0]),G=F?";\ntry{\nret+=":"\n+",C&&(q||I||h&&h!==ka)){if(D="return {"+i+"};",F&&(D="try {\n"+D+"\n}catch(e){return {error: j._err(e,view,"+F+")}}\n"),D=new Function("data,view,j,u"," // "+t+" "+K+" "+g+"\n"+D),D.paths=q,D._tag=g,d)return D;o=1}if(L+=C?(d?(F?"\ntry{\n":"")+"return ":G)+(o?(o=0,n=m=!0,'c("'+h+'",view,'+(q?(p[K-1]=D,K):"{"+i+"}")+")"):">"===g?(k=!0,"h("+r[0]+")"):(l=!0,"((v="+r[0]+')!=null?v:"")')):(n=j=!0,"\n{view:view,tmpl:"+(w?s.length:"0")+","+i+"},"),v&&!z){if(L="["+L.slice(0,-1)+"]",(d||q)&&(L=new Function("data,view,j,u"," // "+t+" "+K+" "+v+"\nreturn "+L+";"),q&&((p[K-1]=L).paths=q),L._tag=g,d))return L;L=A+G+'t("'+v+'",view,this,'+(K||L)+")",q=0,v=0}F&&(n=!0,L+=";\n}catch(e){ret"+(d?"urn ":"+=")+"j._err(e,view,"+F+");}\n"+(d?"":"ret=ret"))}L="// "+t+"\nj=j||"+(b?"jQuery.":"jsviews.")+"views;var v"+(j?",t=j._tag":"")+(m?",c=j._cnvt":"")+(k?"http://www.xuetangx.com/static/xuetangx/js/,h=j.converters.html":"")+(d?";\n":',ret=""\n')+(M.debug?"debugger;":"")+L+(d?"\n":";\nreturn ret;");try{L=new Function("data,view,j,u",L)}catch(O){E("Compiled template code:\n\n"+L+'\n: "'+O.message+'"')}return c&&(c.fn=L),n||(L._nvw=!0),L}function K(a,b){return a&&a!==b?b?h(h({},b),a):a:b&&h({},b)}function L(a){return ja[a]||(ja[a]="&#"+a.charCodeAt(0)+";")}function M(a){var b,c,d=[];if("object"==typeof a)for(b in a)c=a[b],c&&c.toJSON&&!c.toJSON()||i(c)||d.push({key:b,prop:c});return d}function N(a){return null!=a?ea.test(a)&&(""+a).replace(ga,L)||a:""}if(!(b&&b.render||a.jsviews)){var O,P,Q,R,S,T="{",U="{",V="}",W="}",X="^",Y=/^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,Z=/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(!*?[#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?[#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=\s*\.|\s*\^|\s*$)|[)\]])([([]?))|(\s+)/g,$=/[ \t]*(\r\n|\n|\r)/g,_=/\\(['"])/g,aa=/['"\\]/g,ba=/(?:\x08|^)(onerror:)?(?:(~?)(([\w$]+):)?([^\x08]+))\x08(,)?([^\x08]+)/gi,ca=/^if\s/,da=/<(\w+)[>\s]/,ea=/[\x00`><\"'&]/,fa=/^on[A-Z]|^convert(Back)?$/,ga=/[\x00`><"'&]/g,ha=0,ia=0,ja={"&":"&amp;","<":"&lt;",">":"&gt;","\x00":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;"},ka="html",la="data-jsv-tmpl",ma={},na={template:{compile:v},tag:{compile:u},helper:{},converter:{}},oa={jsviews:"v1.0.0-beta",settings:function(a){h(ua,a),f(ua._dbgMode),ua.jsv&&ua.jsv()},sub:{View:s,Err:g,tmplFn:F,cvt:p,parse:I,extend:h,syntaxErr:E,onStore:{},_lnk:d},map:w,_cnvt:o,_tag:r,_err:D};(g.prototype=new Error).constructor=g,l.depends=function(){return[this.get("item"),"index"]},m.depends=function(){return["index"]},s.prototype={get:k,getIndex:m,getRsc:q,hlp:n,_is:"view"};for(P in na)y(P,na[P]);var pa=oa.templates,qa=oa.converters,ra=oa.helpers,sa=oa.tags,ta=oa.sub,ua=oa.settings;b?(O=b,O.fn.render=z,O.observable&&(h(ta,O.views.sub),oa.map=O.views.map)):(O=a.jsviews={},O.isArray=Array&&Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}),O.render=ma,O.views=oa,O.templates=pa=oa.templates,ua({debugMode:f,delimiters:j,onError:function(a,b,d){return b&&(a=d===c?"{Error: "+a+"}":i(d)?d(a,b):d),a==c?"":a},_dbgMode:!0}),sa({"else":function(){},"if":{render:function(a){var b=this;return b.rendering.done||!a&&(arguments.length||!b.tagCtx.index)?"":(b.rendering.done=!0,b.selected=b.tagCtx.index,b.tagCtx.render(b.tagCtx.view,!0))},onUpdate:function(a,b,c){for(var d,e,f=0;(d=this.tagCtxs[f])&&d.args.length;f++)if(d=d.args[0],e=!d!=!c[f].args[0],!this.convert&&!!d||e)return e;return!1},flow:!0},"for":{render:function(a){var b,d=this,e=d.tagCtx,f="",g=0;return d.rendering.done||((b=!arguments.length)&&(a=e.view.data),a!==c&&(f+=e.render(a,b),g+=O.isArray(a)?a.length:1),(d.rendering.done=g)&&(d.selected=e.index)),f},flow:!0},include:{flow:!0},"*":{render:d,flow:!0}}),sa("props",{baseTag:sa["for"],dataMap:w(M)}),qa({html:N,attr:N,url:function(a){return a!=c?encodeURI(""+a):null===a?a:""}}),j()}}(this,this.jQuery)}),function(){define("cs!courseBtnStatus",["require","cs!timeStatus"],function(a){var b,c;return c=a("cs!timeStatus"),b=function(a){var b,d;return d=function(){return a.followed?"followed":"follow"},a.condition_completed?"xuetangX"!==a.owner?d():(b=c.main(a.enrollment_start,a.enrollment_end,a.start,a.end),"preStart_register"===b.state||"end_register"===b.state&&!a.enrolled?d():"preStart_course"===b.state?a.enrolled?"joined":"join":"start_course"===b.state||"end_course"===b.state?a.enrolled?"enter":"join":"preCourse_postRegister"===b.state?a.enrolled?"joined":d():"startCourse_postRegister"===b.state||"end_register"===b.state?a.enrolled?"enter":d():void 0):"condition_completed"}})}.call(this),function(){define("cs!courseBtnEvents",["require","jquery","cs!timeStatus","alert","modalPlus"],function(a){var b,c,d,e,f;return b=a("jquery"),f=a("cs!timeStatus"),d=a("alert"),e=a("modalPlus"),c=function(a){var c,d,e,g,h,i,j;return a.$btn.length?(c=a.$btn,c[0].cParam={},c.on("notLogin",function(){var c;return c=encodeURI(a.courseId),b(this).attr({href:"javascript:",target:"_self"}).on("click",function(){return b(document).trigger("goToLogin").on("userDataForSend",function(b,c){switch(c.course_id=a.courseId,a.type){case"joined":case"enter":return c.enrollment_action="enroll";case"followed":case"follow":return c.enrollment_action="follow"}})})}),c.on("followed",function(){var a;return a=b(this),a.on({mouseover:function(){return a.html("<span class='icon'></span>取消关注")},mouseout:function(){return a.html("<span class='icon'></span>已关注")}})}),c.on("follow",function(){var c;return c=b(this),c[0].cParam.isFollow?c.html("<span class='icon'></span>关注课程").off("mouseover mouseout").trigger("cancelFollow"):(b._data(c[0],"events").mouseover||c.trigger("followed"),c.html("<span class='icon'></span>已关注").trigger("addFollow"),"xuetangX"===a.owner?b.modalPlus({type:"hint",HTML:"关注成功！课程开课时你将会收到通知。"}):c.trigger("followModalForNotOwner"))}),h=function(){return a.authenticated?!0:(c.trigger("notLogin"),!1)},d=function(a){return b.modalPlus({color:"red",type:"alert",HTML:a})},e={},"join"===a.type&&h()?(i=f.courseOpen(a.start,a.end),j=a.majorEnrolled?a.majorUrl:a.ajaxUrl,c.on("click",function(){return b.ajax({url:"/api/web/user/profile",dataType:"json",async:!1}).done(function(a){return e=a}).fail(function(){return b.modalPlus({color:"red",type:"alert",HTML:"获取数据失败，请检测您的网络链接是否已断开！"})}),null===e.email&&null===e.phone_number?b.modalPlus({color:"red",title:"加入课程前请先绑定邮箱",hasCloseBtn:!1,HTML:'<div class="g_modal_plus_alert_text">为了方便您接收课程的重要通知，建议您为账号绑定常用邮箱</div>',btns:{color:"orange",text:'<a href="../../../accounts/login-next=-dashboard-account--1.htm#security"/*tpa=http://www.xuetangx.com/dashboard/account/#security*/ target="_blank" style="color: #ffffff;text-shadow: none;background-image: none;">去绑定</a>'}}):"not_active"!==e.user_type&&"email_not_active"!==e.user_type||null!==e.phone_number?b.ajax({url:j,type:"post",data:{course_id:a.courseId,enrollment_action:"enroll"},dataType:"text"}).done(function(){return 1===i||0===i?(c.off("click").attr("href","/courses/"+encodeURI(a.courseId)+"/info").html("进入课程"),c.trigger(null===e.email&&null!==e.phone_number?"changeToEnterToBind":"changeToEnter")):-1===i?(c.off("click").attr("href","javascript:").html("尚未开课").css("cursor","default").addClass("disabled"),c.trigger(null===e.email&&null!==e.phone_number?"changeToJoinedToBind":"changeToJoined")):void 0}).fail(function(){return d("链接服务器失败！")}):b.modalPlus({color:"red",title:"加入课程前请先激活邮箱",hasCloseBtn:!1,HTML:'<div class="g_modal_plus_alert_text">为了方便您接收课程的重要通知，建议您激活账号的邮箱</div>',btns:{color:"orange",text:'<a href="../../../accounts/login-next=-dashboard-account--1.htm#security"/*tpa=http://www.xuetangx.com/dashboard/account/#security*/ target="_blank" style="color: #ffffff;text-shadow: none;background-image: none;">去激活</a>'}})})):"follow"!==a.type&&"followed"!==a.type||!h()?void 0:(g="follow"http://www.xuetangx.com/static/xuetangx/js/===a.type?!1:!0,g&&c.trigger("followed"),c.on("click",function(){return b.ajax({url:a.ajaxUrl,type:"post",data:{course_id:a.courseId,enrollment_action:g?"unfollow":"follow"},dataType:"text"}).done(function(){return c[0].cParam.isFollow=g,c.trigger("follow"),g=!g}).fail(function(){return d("链接服务器失败！")})}))):!1}})}.call(this),define("courseStartStatus",["jquery","moment"],function(a,b){var c=a("#py_header_data").data("server-time");c=c?c.trim():b();var d=function(a,d){return a?b(d).isBefore(c)?"课程已完结":b(a).from(c)+"开课":"即将开课"};return d}),define("http://www.xuetangx.com/static/xuetangx/js/text!appSrc/include/index/courseAboutRefer.html",[],function(){return'{{for data}}\n <li>\n    <a href="{{:about}}" title="{{:name}}" target="_blank"><img src="{{:thumbnail}}" alt="{{:name}}" title="{{:name}}"></a>\n    <a href="{{:about}}" title="{{:name}}" target="_blank" class="text">{{:name}}</a>\n</li>\n{{/for}}\n'}),define("http://www.xuetangx.com/static/xuetangx/js/text!appSrc/include/index/courseAboutBtns.html",[],function(){return'<div class="explain_box">\n	{{if course.is_selfpaced}}\n			<h4 class="title"><span>New</span><em>全新自主学习模式</em></h4>\n			<ul class="cf list">\n					<li><span></span>本课程可随时加入</li>\n					<li><span></span>课件已全部开放</li>\n					<li><span></span>考核通过即可获得证书</li>\n					<li><span></span>证书价值与随堂模式一致</li>\n			</ul>\n	{{else}}\n			<ul class="cf illustrate">\n					<li>\n						<i>$</i>\n						<span>开课时间：\n							<span>{{:courseStartStatus}}\n							</span>\n						</span>\n					</li>\n\n					<li>\n						<i>j</i>\n						<span>学习时长：\n							<span>\n								{{if course.duration}}\n										{{:course.duration}}\n								{{else}}\n										--\n								{{/if}}\n							</span>\n						</span>\n					</li>\n\n					<li>\n						<i>7</i>\n							<span>课程进度：\n								<span>\n									{{if courseStatus.state == \'start_course\'}}\n										连载至第{{:course.serialized}}讲\n									{{else courseStatus.state == \'startCourse_postRegister\'}}\n										连载至第{{:course.serialized}}讲\n									{{else}}\n										--\n									{{/if}}\n								</span>\n							</span>\n						</li>\n\n					<li>\n						<i>g</i>\n						<span>报名人数：\n							<span>\n								{{if course.enrollment}}\n									{{:course.enrollment}}\n								{{else}}\n									--\n								{{/if}}人\n							</span>\n						</span>\n					</li>\n\n					<li class="last">\n						<i>9</i>\n						<span>\n							<span>\n								{{if course.pre_require}}\n									{{:course.pre_require}}\n								{{else}}\n									--\n								{{/if}}\n							</span>先修知识：\n						</span>\n					</li>\n			</ul>\n	{{/if}}\n\n	<div class="btn_box">\n		{{if course.is_selfpaced}}\n			{{if enrolled}}\n					<a class="ui purple button" href="http://www.xuetangx.com/courses/{{:course.course_id_encode}}/info" title="进入课程" data-click="onClick" data-block="Enroll" data-description="button2">进入课程</a>\n			{{else}}\n					<a class="ui purple button" id="self_paced_btn" href="javascript:" title="加入课程">加入课程</a>\n			{{/if}}\n\n			{{if course.iscertificate && !owned_certificate}}\n				{{if !authenticated || (authenticated && !enrolled)}}\n						<a class="ui button orange" id="join_certi" data-type="join" href="javascript:" title="加课并申请认证证书" >加课并申请认证证书</a>\n				{{else authenticated && enrolled && !paid}}\n						<a class="ui button orange" id="join_certi" data-type="join" href="{{:course.apply_for_certificate_url}}" title="申请认证证书" >申请认证证书</a>\n				{{/if}}\n			{{/if}}\n		{{else}}\n				{{if courseBtnStatus == \'joined\'}}\n						<a class="ui button orange disabled" id="join_free" data-type="joined" href="javascript:" title="尚未开课">尚未开课</a>\n				{{else courseBtnStatus == \'join\'}}\n						{{!-- 如果是免费的课 或者 加入过微专业的课 就显示出加入课程按钮 --}}\n						{{if course.ishonorcourse || major_enrolled}}\n							{{if course.iscertificate}}\n									<a class="ui purple_btn button" id="join_free" data-type="join" href="javascript:" title="仅加课">仅加课</a>\n							{{else}}\n									<a class="ui purple button" id="join_free" data-type="join" href="javascript:" title="加入课程">加入课程</a>\n							{{/if}}\n						{{/if}}\n				{{else courseBtnStatus == \'enter\'}}\n						<a class="ui purple button" id="join_free" data-type="enter" href="http://www.xuetangx.com/courses/{{:course.course_id_encode}}/info" title="进入课程" >进入课程</a>\n				{{else courseBtnStatus == \'followed\'}}\n						<a class="ui btn_followed button" id="join_free" data-type="followed" href="javascript:" title="已关注" ><span class="icon"></span>已关注</a>\n				{{else courseBtnStatus == \'follow\'}}\n						<a class="ui btn_add_follow button" id="join_free" data-type="follow" href="javascript:" title="关注课程" ><span class="icon"></span>关注课程</a>\n				{{else courseBtnStatus == \'condition_completed\'}}\n						<span class="btn_1 ui button disabled">无法加入</span>\n				{{/if}}\n\n				{{if course.iscertificate && !major_enrolled && !paid && courseBtnStatus != \'condition_completed\'}}\n					{{!-- 认证过期了 --}}\n					{{if !course.certificate_active}}\n						<a class="ui button orange disabled" id="join_certi" data-type="join" title="认证证书申请截止" >认证证书申请截止</a>\n					{{else}}\n						{{if courseBtnStatus == \'join\'}}\n							<a class="ui button orange" id="join_certi" data-type="join" href="javascript:" title="加课并申请认证证书" >加课并申请认证证书</a>\n						{{else}}\n							<a class="ui button orange" id="join_certi" data-type="join" href="{{:course.apply_for_certificate_url}}" title="申请认证证书" >申请认证证书</a>\n						{{/if}}\n					{{/if}}\n				{{/if}}\n		{{/if}}\n\n		{{if course.owner == \'edX\'}}\n			<a class="ui button orange" href="{{:course.original_url}}" target="_blank">去edX查看</a>\n		{{/if}}\n	</div>\n\n	{{if course.owner == \'edX\'}}\n		<p class="number"><span>本课程由edX联盟院校提供</span></p>\n	{{/if}}\n\n	{{if course.is_selfpaced}}\n		<p class="number">报名人数：\n			<span>\n				{{if course.enrollment}}\n					{{:course.enrollment}}\n				{{else}}\n					0\n				{{/if}}人\n		  </span>\n	  </p>\n	{{/if}}\n</div>\n'}),define("http://www.xuetangx.com/static/xuetangx/js/text!appSrc/include/index/courseAboutHottopic.html",[],function(){return'{{for results}}\n <li>\n    <a href="{{:location}}" title="{{:text}}" target="_blank" class="text">{{:text}}</a>\n</li>\n{{/for}}'}),function(){define("cs!appSrc/coffee/courseDetail.coffee",["require","jquery","cs!timeStatus","modalPlus","moment","http://www.xuetangx.com/static/xuetangx/js/jsrender.min","djangoAjaxPost","cs!courseBtnStatus","cs!courseBtnEvents","courseStartStatus","http://www.xuetangx.com/static/xuetangx/js/text!appSrc/include/index/courseAboutRefer.html","http://www.xuetangx.com/static/xuetangx/js/text!appSrc/include/index/courseAboutBtns.html","http://www.xuetangx.com/static/xuetangx/js/text!appSrc/include/index/courseAboutHottopic.html"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m;return b=a("jquery"),l=a("cs!timeStatus"),j=a("modalPlus"),k=a("moment"),a("http://www.xuetangx.com/static/xuetangx/js/jsrender.min"),a("djangoAjaxPost"),b("#xt_september_newedition_courseabout").length?(h=a("cs!courseBtnStatus"),g=a("cs!courseBtnEvents"),i=a("courseStartStatus"),f=a("http://www.xuetangx.com/static/xuetangx/js/text!appSrc/include/index/courseAboutRefer.html"),d=a("http://www.xuetangx.com/static/xuetangx/js/text!appSrc/include/index/courseAboutBtns.html"),e=a("http://www.xuetangx.com/static/xuetangx/js/text!appSrc/include/index/courseAboutHottopic.html"),c=b("#course_data"),m=b.templates(d),b.ajax({url:c.data("url"),data:c.data("parameter"),dataType:"json"}).done(function(a){var d,e,f,j,k,n,o,p,q,r,s,t;return s=c.data("enrollment_start"),r=c.data("enrollment_end"),t=c.data("start"),q=c.data("end"),p=b("#py_header_data").data("server-time"),n=l.main(s,r,t,q),k=i(t,q),a.courseStatus=n,a.courseStartStatus=k,a.course={},a.course.course_id=c.data("course_id"),a.course.course_id_encode=encodeURI(a.course.course_id),a.course.is_selfpaced=c.data("is_selfpaced"),a.course.owner=c.data("owner"),a.course.enrollment=c.data("enrollment"),a.course.change_enrollment=c.data("change_enrollment"),a.course.original_url=c.data("original_url"),a.course.serialized=c.data("serialized"),a.course.serialized<0&&(a.course.serialized=0),a.course.iscertificate=c.data("iscertificate"),a.course.certificate_active=c.data("certificate_active"),a.course.ishonorcourse=c.data("ishonorcourse"),a.course.apply_for_certificate_url=c.data("apply_for_certificate_url"),a.course.course_major_url=c.data("course_major_url"),a.course.is_course_major=c.data("is_course_major"),a.course.duration=c.data("duration"),a.course.pre_require=c.data("prerequire"),a.courseBtnStatus=h({followed:a.followed,enrolled:a.enrolled,owner:c.data("owner"),enrollment_start:s,enrollment_end:r,start:t,end:q,condition_completed:a.condition_completed}),c.append(m.render(a)),c.trigger("renderAfter"),d=b("#join_free"),e=b("#join_certi"),f={},e.length&&(a.authenticated?e.on("click",function(){return"javascript:"===e.attr("href")?(b.ajax({url:"/api/web/user/profile",dataType:"json",async:!1}).done(function(a){return f=a}).fail(function(){return b.modalPlus({color:"red",type:"alert",HTML:"获取数据失败，请检测您的网络链接是否已断开！"})}),null===f.email&&null===f.phone_number?b.modalPlus({color:"red",title:"加入课程前请先绑定邮箱",hasCloseBtn:!1,HTML:'<div class="g_modal_plus_alert_text">为了方便您接收课程的重要通知，建议您为账号绑定常用邮箱</div>',btns:{color:"orange",text:'<a href="../../../accounts/login-next=-dashboard-account--1.htm#security"/*tpa=http://www.xuetangx.com/dashboard/account/#security*/ target="_blank" style="color: #ffffff;text-shadow: none;background-image: none;">去绑定</a>'}}):"not_active"!==f.user_type&&"email_not_active"!==f.user_type||null!==f.phone_number?e.attr("href",a.course.apply_for_certificate_url):b.modalPlus({color:"red",title:"加入课程前请先激活邮箱",hasCloseBtn:!1,HTML:'<div class="g_modal_plus_alert_text">为了方便您接收课程的重要通知，建议您激活账号的邮箱</div>',btns:{color:"orange",text:'<a href="../../../accounts/login-next=-dashboard-account--1.htm#security"/*tpa=http://www.xuetangx.com/dashboard/account/#security*/ target="_blank" style="color: #ffffff;text-shadow: none;background-image: none;">去激活</a>'}})):void 0}):e.on("click",function(a){return a.preventDefault(),b(document).trigger("goToLogin")}),e.on("hasFreeEnroll",function(){return e.hasClass("disabled")?void 0:e.html("申请认证证书");

})),d.on("changeToJoined",function(){var a;return b(this).addClass("btn_3").removeClass("btn_1"),e.length&&e.trigger("hasFreeEnroll"),a=b("#title1").html(),b.modalPlus({color:"green",title:"您已经成功加入课程:《"+a+"》!",HTML:'<div class="g_modal_plus_alert_text">本课程尚未开课，请留意站内信通知，不要错过开课时间。</div>',btns:{color:"orange",text:'<a href="../../../courses-1.htm"/*tpa=http://www.xuetangx.com/courses*/ style="color: #ffffff;text-shadow: none;background-image: none;">浏览更多课程</a>'}})}),d.on("changeToJoinedToBind",function(){var a;return b(this).addClass("btn_3").removeClass("btn_1"),e.length&&e.trigger("hasFreeEnroll"),a=b("#title1").html(),b.modalPlus({color:"green",title:"您已经成功加入课程:《"+a+"》!",HTML:'<div class="g_modal_plus_alert_text">本课程尚未开课，建议您为账号绑定常用邮箱便于接收开课通知</div>',btns:[{color:"orange",text:'<a href="../../../accounts/login-next=-dashboard-account--1.htm#security"/*tpa=http://www.xuetangx.com/dashboard/account/#security*/ style="color: #ffffff;text-shadow: none;background-image: none;">去绑定</a>'},{color:"default",text:'<a href="javascript:;" style="color: #ffffff;text-shadow: none;background-image: none;">先不绑定</a>'}]}).on("modal.btn1.click",function(){return b.modalPlus()})}),d.on("changeToEnter",function(){var c;return b(this).addClass("btn_2").removeClass("btn_1"),e.length&&e.trigger("hasFreeEnroll"),c=b("#title1").html(),b.modalPlus({color:"green",title:"您已经成功加入课程:《"+c+"》!",HTML:'<div class="g_modal_plus_alert_text">本课程已更新至第'+a.course.serialized+"章</div>",btns:{color:"orange",text:'<a href="http://www.xuetangx.com/courses/'+encodeURI(a.course.course_id)+'/info" style="color: #ffffff;text-shadow: none;background-image: none;">开始学习</a>'}})}),d.on("changeToEnterToBind",function(){var c;return b(this).addClass("btn_2").removeClass("btn_1"),e.length&&e.trigger("hasFreeEnroll"),c=b("#title1").html(),b.modalPlus({color:"green",title:"您已经成功加入课程:《"+c+"》!",HTML:'<div class="g_modal_plus_alert_text">为了方便您接收课程的重要通知，建议您为账号绑定常用邮箱</div>',btns:[{color:"orange",text:'<a href="../../../accounts/login-next=-dashboard-account--1.htm#security"/*tpa=http://www.xuetangx.com/dashboard/account/#security*/ style="color: #ffffff;text-shadow: none;background-image: none;">去绑定</a>'},{color:"default",text:'<a href="http://www.xuetangx.com/courses/'+encodeURI(a.course.course_id)+'/info" style="color: #ffffff;text-shadow: none;background-image: none;">先不绑定，去上课</a>'}]})}),d.on("cancelFollow",function(){return b(this).removeClass("btn_followed").addClass("btn_add_follow")}),d.on("addFollow",function(){return b(this).removeClass("btn_add_follow").addClass("btn_followed")}),d.on("followModalForNotOwner",function(){return"edX"===a.course.owner?b.modalPlus({type:"hint",HTML:"关注成功！课程开课时你将会收到通知。"}):void 0}),a.condition_completed&&g({$btn:d,courseId:a.course.course_id,authenticated:a.authenticated,owner:a.course.owner,followed:a.followed,enrolled:a.enrolled,type:d.data("type"),enrollment_start:s,enrollment_end:r,start:t,end:q,ajaxUrl:a.course.change_enrollment,majorUrl:c.data("verified_enrollment"),majorEnrolled:a.major_enrolled}),o=!1,j={},b("#self_paced_btn").on("click",function(){var c;return c=b(this),a.authenticated?o===!1?(o=!0,b.ajax({url:"/api/web/user/profile",dataType:"json",async:!1}).done(function(a){return j=a}).fail(function(){return b.modalPlus({color:"red",type:"alert",HTML:"获取数据失败，请检测您的网络链接是否已断开！"})}),null===j.email&&null===j.phone_number?b.modalPlus({color:"red",title:"加入课程前请先绑定邮箱",hasCloseBtn:!1,HTML:'<div class="g_modal_plus_alert_text">为了方便您接收课程的重要通知，建议您为账号绑定常用邮箱</div>',btns:{color:"orange",text:'<a href="../../../accounts/login-next=-dashboard-account--1.htm#security"/*tpa=http://www.xuetangx.com/dashboard/account/#security*/ target="_blank" style="color: #ffffff;text-shadow: none;background-image: none;">去绑定</a>'}}):"not_active"!==j.user_type&&"email_not_active"!==j.user_type||null!==j.phone_number?b.ajax({url:"/change_enrollment",data:{course_id:a.course.course_id,enrollment_action:"enroll"},type:"POST"}).done(function(){return c.html("进入课程").attr("href","/courses/"+encodeURI(a.course.course_id)+"/info"),a.course.iscertificate&&b("#join_certi").html("申请认证证书"),b.modalPlus(null===j.email&&null!==j.phone_number?{title:"您已经成功加入课程",HTML:'<div class="g_modal_plus_alert_text">为了方便您接收课程的重要通知，建议您为账号绑定常用邮箱</div>',color:"green",btns:[{color:"orange",text:'<a href="../../../accounts/login-next=-dashboard-account--1.htm#security"/*tpa=http://www.xuetangx.com/dashboard/account/#security*/ style="color: #ffffff;text-shadow: none;background-image: none;">去绑定</a>'},{color:"default",text:'<a href="http://www.xuetangx.com/courses/'+encodeURI(a.course.course_id)+'/info" style="color: #ffffff;text-shadow: none;background-image: none;">先不绑定，去上课</a>'}]}:{title:"您已经成功加入课程",HTML:'<div class="g_modal_plus_alert_text">自主模式开启，随时可以继续你的学习。</div>',color:"green",btns:{color:"orange",text:'<a href="http://www.xuetangx.com/courses/'+encodeURI(a.course.course_id)+'/info" style="color: #ffffff;text-shadow: none;background-image: none;">开始学习</a>'}})}).fail(function(a){return console.error(a)}):b.modalPlus({color:"red",title:"加入课程前请先激活邮箱",hasCloseBtn:!1,HTML:'<div class="g_modal_plus_alert_text">为了方便您接收课程的重要通知，建议您激活账号的邮箱</div>',btns:{color:"orange",text:'<a href="../../../accounts/login-next=-dashboard-account--1.htm#security"/*tpa=http://www.xuetangx.com/dashboard/account/#security*/ target="_blank" style="color: #ffffff;text-shadow: none;background-image: none;">去激活</a>'}})):void 0:b(document).trigger("goToLogin")})}).fail(function(){return b.modalPlus({color:"red",type:"alert",HTML:"获取数据失败，请检测您的网络链接是否已断开！"})}),b.ajax({url:b("#course_ref_template").data("url"),dataType:"json"}).done(function(a){var c,d;return a.success&&(c="",a.data.length)?(d=b.templates(f),b(".about_aside").show(),b("#courseref_content").html(d.render(a)),a.data.forEach(function(a){return c+=a.course_id+"|||"}),c=c.substring(0,c.length-3)):void 0}),b.ajax({url:"/ads?plate=2&ad_type=1",dataType:"json"}).done(function(a){var c;return a.results.length?(c=b.templates(e),b(".hottopic_aside").show(),b("#hottopic_content").html(c.render(a))):void 0})):!1})}.call(this),require(["jquery","appCommon","xtVideo","cs!appSrc/coffee/courseDetail.coffee"],function(a,b){return a("#xt_september_newedition_courseabout").length?void b(function(){var b=a("#courseCorrelation").offset().top,c=a("#courseIntro").offset().top-65,d=a("#courseIndex").offset().top-65,e=a("#professor").offset().top-65,f=a("#pureNote").offset().top-65,g=a("#commenQuestion").offset().top-65;a("#course_data").on("renderAfter",function(){var c=function(){var c=a(document).scrollTop();b>c?(a("#courseAboutCeiling").hide(),a("#courseAboutCeiling").find(".btn_box").insertAfter(a("#course_data").find("ul"))):c>b&&(a("#courseAboutCeiling").show(),a("#course_data").find(".btn_box").appendTo(a("#courseAboutCeiling").children())),c>b-1&&e>c&&(a("#courseAboutCeiling").find("li").removeClass("current"),a("#courseAboutCeiling").find("li").eq(0).addClass("current")),c>e-1&&f>c&&(a("#courseAboutCeiling").find("li").removeClass("current"),a("#courseAboutCeiling").find("li").eq(1).addClass("current")),c>f-1&&g>c&&(a("#courseAboutCeiling").find("li").removeClass("current"),a("#courseAboutCeiling").find("li").eq(2).addClass("current")),c>g-1&&(a("#courseAboutCeiling").find("li").removeClass("current"),a("#courseAboutCeiling").find("li").eq(3).addClass("current"))};c(),a(window).on("scroll",function(){c()})});var h=function(c){switch(c){case 0:a(document).scrollTop(b);break;case 1:a(document).scrollTop(e);break;case 2:a(document).scrollTop(f);break;case 3:a(document).scrollTop(g)}};a("#courseAboutCeiling").on("click","li",function(){var b=a(this).index();h(b)}),a("#courseAboutNav").on("click","li",function(){var b=a(this).index();h(b)}),a("#courseIndex").find(".limit").height()<815&&a("#showContent").hide(),a(".show_all").add("#showContent").on("click","a",function(){a(this).parent().prev().hasClass("limit")?(a(this).parent().prev().removeClass("limit"),a(this).text("[收起]"),b=a("#courseCorrelation").offset().top-65,c=a("#courseIntro").offset().top-65,d=a("#courseIndex").offset().top-65,e=a("#professor").offset().top-65,g=a("#commenQuestion").offset().top-65):(a(this).parent().prev().addClass("limit"),a(this).text("[查看全部]"),b=a("#courseCorrelation").offset().top-65,c=a("#courseIntro").offset().top-65,d=a("#courseIndex").offset().top-65,e=a("#professor").offset().top-65,g=a("#commenQuestion").offset().top-65)});var i,j=a("#video").data("ccid"),k=a("#video").data("poster");j&&(a.get("/videoid2source/"+j,function(b){var c=b.sources.quality20[0]||b.sources.quality10[0];i=a('<video src="'+c+'" poster="'+k+'"></video>'),i.appendTo("#video").xtVideo({id:j,cid:location.pathname.match(/^\/courses\/(.*)\/about.*/)[1],volume:{value:.8},speed:{show:!1,value:0,speedValue:[2.5,2,1.5,1,.5]},quality:{show:!1},caption:{show:!1}}).on("canplay",function(){a("#courseVideoPlay").show()}),i.on("play",function(){a("#courseVideoPlay").remove()}),i.show()}),a("#courseVideoPlay").on("click",function(){i.trigger("play"),a(this).remove()}))}):!1}),define("appSrc/courseabout",function(){});